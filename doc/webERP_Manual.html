<!-- This is straight html.  No style, inline style or style sheet on purpose.  In this way the help can be easily
     broken into sections for online context-sensitive help.
		 The only html used within are:
		 <br>
		 <div>
		 <table>
		 <font>
		 <b>
		 <u>
		 <ul>
		 <ol>
		 
		 Comments beginning with Help Begin and Help End denote the beginning and end of a section that goes into the online help.
		 What section is named after Help Begin: and there can be multiple sections separated with a comma.
-->
		 
<html>
<head>
<title>webERP Manual</title>
</head>
<body>
<basefont face="Arial, Verdana, Helvetica">
<br><br>
<div align="center"><font size="+4" color="blue"><b><u>webERP  Manual</u></b></font></div> 
<table cellpadding="110">
<tr>
<td>
<font size="+3"><b>Table of Contents</b></font>

<LI><A HREF='#Introduction'>Introduction</A></LI>
<LI>Why Another Accounting Program?</LI>

<LI>System Requirements</LI>
<LI>Getting Started</LI>
<LI>Prerequisites</LI>
<LI>Copying the PHP Scripts</LI>
<LI>Creating the Database</LI>
<LI>Editing config.php</LI>
<LI>Logging In For the First Time</LI>
<LI>Themes and GUI Modification</LI>
<LI>Setting Up Users</LI>
<LI><A HREF='#Security'>Security Schema</A></LI>
<LI><A HREF='#NewSystem'>To Create a New System</A></LI>
<LI>Running the Demonstration Database</LI>
<LI>Setting Up A System</LI>
<LI>Setting Up Inventory Items</LI>
<LI>Entering Inventory Balances</LI>
<LI>Inventory Ledger Integration to General Ledger Issues</LI>
<LI>Setting Up Customers</LI>
<LI>Entering Customer Balances</LI>
<LI>Reconciling the Debtors Ledger Control Account</LI>
<LI>Finally</LI>
<LI><A HREF='#Conventions'>System Conventions</A></LI>
<LI>Navigating the Menu</LI>
<LI>Reporting</LI>
<LI><A HREF='#Inventory'>Inventory (aka "Stock")</A></LI>
<LI>Overview</LI>
<LI>Inventory System Features</LI>
<LI>Adding Inventory Items</LI>
<LI>Item Code</LI>
<LI>Part Descriptions</LI>
<LI>Categories</LI>
<LI>Unit of Measurement</LI>
<LI>Economic Order Quantity</LI>
<LI>Packaged Volume</LI>
<LI>Packaged Weight</LI>
<LI>Units of Measure</LI>
<LI>Current or Obsolete</LI>
<LI>Make Or Buy</LI>
<LI>Setting Up Assembly Items</LI>
<LI>Controlled</LI>
<LI>Serialised</LI>
<LI>Bar Code</LI>
<LI>Discount Category</LI>
<LI>Decimal Places</LI>
<LI>Inventory Costing</LI>
<LI>Material Cost</LI>
<LI>Labour Cost</LI>
<LI>Overhead Cost</LI>
<LI>Standard Costing Considerations</LI>
<LI>Actual Cost</LI>
<LI>Alterations To Labour Cost, Material Cost or Overhead Cost</LI>
<LI>Selecting Inventory Items</LI>
<LI>Amending Inventory Items</LI>
<LI>Changing a Category</LI>
<LI>Alterations to the Make or Buy Flag</LI>
<LI>Inventory Categories</LI>
<LI>Inventory Category Code</LI>
<LI>Inventory Category Description</LI>
<LI>Balance Sheet Inventory GL Account</LI>
<LI>Inventory Adjustments GL Posting Account</LI>
<LI>Purchase Price Variance Account</LI>
<LI>Material Usage Variance Account</LI>
<LI>Type of Resource</LI>
<LI>Inventory Location Maintenance</LI>
<LI>Inventory Adjustments</LI>
<LI>Inventory Location Transfers</LI>
<LI>Inventory Reports and Inquiries</LI>
<LI>Inventory Status inquiries</LI>
<LI>Inventory Movement inquiries</LI>
<LI>Inventory Usage inquiries</LI>
<LI>Inventory Valuation Report</LI>
<LI>Inventory Planning Report</LI>
<LI>Inventory Checks</LI>
<LI><A HREF='#AR'>Accounts Receivable</A></LI>
<LI>Overview</LI>
<LI>Features</LI>
<LI>Entering New Customers</LI>
<LI>Customer Code</LI>
<LI>Customer Name</LI>
<LI>Address Line 1, 2, 3 and 4</LI>
<LI>Currency</LI>
<LI>Invoice Discount</LI>
<LI>Prompt Payment Discount</LI>
<LI>Customer Since</LI>
<LI>Payment Terms</LI>
<LI>Credit Status or Rating</LI>
<LI>Credit Limit</LI>
<LI>Invoice Addressing</LI>
<LI>Entering Customer Branches</LI>
<LI>Branch Name</LI>
<LI>Branch Code</LI>
<LI>Branch Contact / Phone / Fax / Address</LI>
<LI>Sales Person</LI>
<LI>Draw Stock From</LI>
<LI>Forward Date From A Day In The Month</LI>
<LI>Delivery Days</LI>
<LI>Phone/Fax/Email</LI>
<LI>Tax Authority</LI>
<LI>Disable Transactions</LI>
<LI>Default Freight Company</LI>
<LI>Postal Address 1, 2, 3 and 4</LI>
<LI>Amending Customer Details</LI>
</LI>Salesperson Records</LI>
<LI>Salespeople Code</LI>
<LI>Salesperson Name, Telephone and Fax Numbers</LI>
<LI>Salesperson Commission Rates and Breakpoint</LI>
<LI>Sales Types/ Price Lists</LI>
<LI>Sales Type Code</LI>
<LI>Sales Type Description</LI>
<LI>Payment Terms</LI>
<LI>Payment Terms Code</LI>
<LI>Payment Terms Description</LI>
<LI>Days Before Due / Day In Following Month When Due</LI>
<LI>Shippers</LI>
<LI>Credit Status Ratings</LI>
<LI>Status Code</LI>
<LI>Status Description</LI>
<LI>Disallow Invoices</LI>
<LI>Tax Calculations</LI>
<LI>Overview</LI>
<LI>Setting up Taxes</LI>
<LI>Sales only within one Tax Authority Example - 2 Tax Levels:</LI>
<LI>Sales only within one Tax Authority Example - 3 Tax Levels:</LI>
<LI>Sales Within Two Tax Authorities Example - 3 Tax Levels:</LI>
<LI>Pricing and Discounting</LI>
<LI>Pricing Overview</LI>
<LI>Maintaining Prices</LI>
<LI>Discount Matrix</LI>
<LI>Invoicing An Order</LI>
<LI>Selecting an Order To Invoice</LI>
<LI>Producing An Invoice From A Selected Order</LI>
<LI>Credit Notes</LI>
<LI>Entry Of Receipts</LI>
<LI>Receipts - Customer</LI>
<LI>Receipts - Date</LI>
<LI>Receipts - Currency and Exchange Rate</LI>
<LI>Receipts - Payment Method</LI>
<LI>Receipts - Amount</LI>
<LI>Receipts - Discount</LI>
<LI>Receipts - Allocating to Invoices</LI>
<LI>Differences on Exchange</LI>
<LI>Receipts Processing</LI>
<LI>Deposits Listing</LI>
<LI>Allocate Credits To A Customer's Account
<LI>Customer Inquiries</LI>
<LI>Customer Account inquiries</LI>
<LI>Transaction Detail inquiries</LI>
<LI>Customers - Reporting</LI>
<LI>Aged Customer Balance Listing</LI>
<LI>Customer Statements</LI>
<LI>Customer Transaction Listing Options</LI>
<LI>Sales Analysis</LI>
<LI>Sales Analysis Report Headers</LI>
<LI>Sales Analysis Report Columns</LI>
<LI>Automating Sales Reports</LI>
<LI>Printing Invoices Or Credit Notes</LI>
<LI><A HREF='#Orders'>Sales Orders</A></LI>
<LI>Sales Order Functionality</LI>
<LI>Entry of Sales Orders</LI>
<LI>Sales Orders - Selection of the Customer and Branch</LI>
<LI>Selection of Order Line Items</LI>
<LI>Delivery Details</LI>
<LI>Modfiying An Order</LI>
<LI>Shipments</LI>
<LI>Shipment General Ledger Posting</LI>
<LI>Creating Shipments</LI>
<LI>Shipment Costings</LI>
<LI>Closing a Shipment</LI>
<LI><A HREF='#GL'>General Ledger</A></LI>
<LI>General Ledger Overview</LI>
<LI>Account Groups</LI>
<LI>Bank Accounts</LI>
<LI>Bank Account Payments</LI>
<LI>General Ledger Integration Setup</LI>
<LI>Sales Journals</LI>
<LI>Stock Journals</LI>
<LI>EDI</LI>
<LI>EDI Setup</LI>
<LI>Sending EDI Invoices</LI>
<LI><A HREF='#Utilities'>Special Utilities</A></LI>
<LI>Re-Apply Standard Costs to Sales Analysis</LI>
<LI>Change A Customer Code</LI>
<LI>Change An Inventory Code</LI>
<LI>Make Stock Locations</LI>
<LI>Repost General Ledger from Period</LI>
<LI><A HREF='#NewScripts'>Developing New Scripts</A></LI>
<LI>Directory Structure</LI>
<LI>session.inc</LI>
<LI>header.inc</LI>
<LI>footer.inc</LI>
<LI>config.php</LI>
<LI>PDFStarter_ros.inc</LI>
<LI>Database Abstraction - ConnectDB.inc</LI>
<LI>DateFunctions.inc</LI>
<LI>SQL_CommonFuctions.inc</LI>
<LI>Contributors - Acknowledgements</LI>
<br><br><br>
<font size="+3"><b><A NAME='Introduction'>Introduction</A></b></font>
<br><br>
<font size="+2"><b>Why Another Accounting Program?</b></font>
<br><br>
Business is changing. It is becoming more dynamic and geographically dispersed. The traditional communication tools particularly the fax machine are being displaced by email. Information is required to be available 24x7 at the click of a button via the Internet. This is a modern business system that has adapted to the new environment.
<br><br>
The Internet, a proliferation of TCP/IP networking computers all linked together provides a compelling infrastructure for business systems because it offers:
<ul>
<li>Unparalleled reliability
<li>Low cost, wide area networking
<li>A common interface available on all computers - a web browser
<li>Minimal investment in infrastructure - the Internet is built largely on open source software
</ul>
An accounting application which uses a web browser as its client interface allows graphical screens to be displayed over minimal networks and allows any computer irrespective of operating system or even a PDA with a browser, access to vital company information 24 hours 7 days a week. Many accounting programs have some web functionality to allow orders to be placed by customers directly online. However, this functionality is often added retrospectively as a kludge and the efficiency of the medium is never realised because it is not designed in from the outset. WEB-ERP is designed from the ground up as a web application with efficiency and usability primary objectives. It is written with best of breed programming tools that allow it to be run on most computers and operating systems.
<br>
<br>
<font size="+2"><b>System Requirements</b></font>
<br><br>
There are a many possible configurations that could run this application. The scale of the enterprise will have a significant bearing on the final configuration.
<br><br>
The operating system and the database engine chosen will have the largest bearing on the System requirements. Each client connection to the web server and database engine will also consume RAM so the more connections the larger the RAM requirement. Similarly disk space required is a function of the size of the data. Suffice it to say that due to the efficiency of the components of the system the demands on the hardware are exceptionally light by client server application standards.
<br><br>
In general, a linux based installation will demand less of the hardware and even an entry level server will provide good performance for up to 30 users. RAID Level 1 at least with fast SCSI disks are preferred. The system is effectively a web server and a database server - this technology is tested with thousands of simultaneous users daily. With multiple servers balancing the load and a separate database server with SMP and large amounts of RAM  the limit on database size and the number of users is large enough for the largest businesses.
<br><br><br>
<font size="+3"><b><A NAME=Getting_Started>Getting Started</A></b></font>
<br><br>
<font size="+2"><b>Prerequisites</b></font>
<br><br>
<ul>
<li>PHP greater than 4.2. The system is therefore operating system independent since PHP can be configured as a CGI module for use on MS IIS or as a module for Apache under either Windows (NT, 2000 or XP) or Unix/Linux. It has been tested under both windows (NT and XP) and linux. 
<li>MySQL greater than version 4, with Innodb transactional tables support - foreign key constraints are also required - these were added to Innodb in 2003. Innodb was introduced in 2001 to MySQL and has oracle like functionality - row level locking and database transactions with similar speed. (The system could be used with Oracle or other database systems, with minimal modification) An example configuration file my.cnf normally under /usr/local/mysql/var is available in the mysql documentation to show typical settings for the innodb configuration. The expected size of the data is useful although innodb can create an auto-extending data file and does so by default as of MySQL 4. All tables are defined as Innodb tables as of version 2.8.
<li>A web server. Apache - the software serving nearly 70% of all web pages - is recommended - but most web servers are supported by PHP in various forms the most popular choice on windows will likley be MS IIS.
<li>If the web server is accessible over the internet ie not just over a LAN then encrypted communications are required. The openssl and mod-ssl module for apache can be used easily to ensure all data is transmitted in encrypted form.
</ul>
Using apache with mod_ssl and openssl secure sockets makes sense and where there is any data transmitted over the internet and not just over a LAN.

Getting PHP and MySQL installed are well covered elsewhere - see the following links:
<br><br>
<a href="http://logidac.com/apache/apache-install-rpm.phtml">http://logidac.com/apache/apache-install-rpm.phtml</a>
<br><br>
<a href="http://www.linux-sottises.net/en_apache_install.php">http://www.linux-sottises.net/en_apache_install.php</a>
<br><br>
It is important to ensure that the php.ini setting for session.auto_start = 0. Some rpm distributions come with this set to 1 which makes it impossible to use classes within php code. Classes are used extensively in the system and the system starts sessions whenever it needs them - it is safe to set this  to 0.
<br><br>
The main issues with installation of PHP appear to be:
<ol>
<li>Some windows installations come with a setting for session.save_path= /tmp this is inappropriate directory for windows and it should be changed to session.save_path=C:\temp or something more appropriate.
<li>When the system is hosted on a multi-homed web server farm, the session needs a directory to be specified as a permanent directory otherwise alternative servers serving subsequent pages depending on the load at the time will not be able to find the session cookie. There is a config.php setting for $SessionSavePath this should be set appropriately for the web server host.
<li>For a reason unknown some servers are unable to obtain the correct directory automatically using the line: $rootpath = dirname($_SERVER['PHP_SELF']); This will be evidenced by the system's inability to find the page links for the various system options. If this happens the $rootpath variable can be set to the root path of the scripts directly.
<li>In some  IIS  installations the following message occurs and similar messages throughout the system:
<br>
Notice: Undefined index: AttemptsCounter in c:\inetpub\wwwroot\web-erp\includes\session.inc on line 20
<br><br>
A notice like this is not an error as such - it is acceptable to use variables without first initialising them in PHP. To avoid showing these notices a configuration directive in php.in needs to be modified. Look for the line in php.ini 
<br><br>
error_reporting  = E_ALL; display all errors, warnings and notices
<br><br>
and change it to :
<br><br>	
error_reporting  = E_ALL & ~A_NOTICE
</ol>
There is a configuration directive in config.php that sets error_reporting to the above for web-erp use as of version 2.8
<br><br>
The system could be used with many other database servers but it is tested and developed on MySQL. Independent benchmarks show that MySQL is at least one of the fastest for most common database tasks. It is especially fast at initiating a connection and due to the stateless nature of the web, a new connection is required to be established on every page - this makes MySQL particularly suitable for web based applications such as this.
<br><br>
The ftp library for PHP is only required for sending order files to a Radio Beacon ftp server for remote warehouse services.
<br><br>
Assuming that a web-server with PHP  functionality is operational and a MySQL server is available either on the same machine or on the network , a new installation consists of the following five steps:
<br><br>
<ul>
<li>Copying all the PHP scripts and include files to a directory under the web server root directory.
<li>Creating the database and populating it with initial data 
<li>Editing config.php for the database connection information and any other requirements 
<li>Logging into the system for the first time 
<li>Setting up company specific information in the system. 
</ul>
<font size="+2"><b>Copying the PHP Scripts</b></font> 
<br><br>
All files in the archive except the installation instructions in INSTALL.txt, web-erp-demo.sql and web-erp-new.sql should be copied to a directory under the web server root directory. This varies between installations but:
<br><br>
/usr/local/httpd/htdocs/
<br><br>
is the apache root directory under SuSE. Normally the Apache document root directory is called something ? "/htdocs"
<br><br>
Copy the archive to the this directory and then extract the archive andl create the web-erp directory under the web server root directory and put all the scripts in that directory.
<br><br>
<font size="+2"><b>Creating the Database</b></font>
<br><br> 
You need to know the user name and password for the MySQL server. If you have not set these up the default is
<br><br>
user root
<br>
password ""
<br><br>
BUT ... you should NOT use this account - you should set up another user for your mysql installation and change the root password to something other than "".
<br><br>
All instructions for using MySQL will refer to the command line client that comes with mysql. To run this under windows, a DOS box must be opened - from XP or 2000 click, Start, Run, enter cmd and click run. The mysql.exe binary is located by default under C:\mysql\bin\mysql.exe this would be the command line statement required to run mysql client, the options discussed below should be appended as required.
<br><br>
>From the MySQL manual (edited):
<br><br>
" The MySQL root user is created as a superuser who can do anything. Connections must be made from the local host. NOTE: The initial root password is empty, so anyone can connect as root without a password and be granted all privileges. Because your installation is initially wide open, one of the first things you should do is specify a password for the MySQL root user. You can do this as follows (note that you specify the password using the PASSWORD() function):
<br><br>
You can, in MySQL Version 3.22 and above, use the SET PASSWORD statement:
<br><br>
shell> mysql -u root mysql
<br>
mysql> SET PASSWORD FOR root=PASSWORD('new_password');"
<br><br>
where 'new_password' is the new password you chose for the root user.
<br><br>
Also from the MySQL manual (edited):
" Also, if you have changed the root user password, you must specify it for the mysql commands below.
You can add new users by issuing GRANT statements:
<br><br>
shell> mysql --user=root -p 'new_password' mysql
<br>
mysql> GRANT ALL PRIVILEGES ON *.* TO weberp@localhost IDENTIFIED BY 'some_pass' WITH GRANT OPTION;"
<br><br>
Where 'some_pass' is a password of your choice for the new user 'weberp'. Note that this user, weberp, can only connect from the local machine so if the web server is on a different machine to the MySQL server then you need to give privileges to connect from other computers. See the MySQL manual.
<br><br>
Innodb tables must be enabled in the MySQL server. These tables allow database transactions which are a critical component of ERP software. Innodb tables require some parameters to be set up in my.cnf - there are some examples in the MySQL manual under table types - Innodb tables.
<br><br>
If you have an account set up already in MySQL and innodb tables enabled, then all you need to do is to run one of the sql scripts.
<br><br>
Two scripts are provided:
<br><br>
<ol>
<li>web-erp-demo.sql This has a minimal amount of demonstration data with a bogus company set up so that transactions can be tried to see how the system works.
<li>web-erp-new.sql This script has only the basic data necessary to start a new company system off. If you wish to set up your company using the web-erp software, then this is the script to use.This creates a weberp database and populates it with only the very basic data to start off.
</ol>
The files web-erp-demo.sql and web-erp-new.sql should be in the directory with all the PHP scripts - first change directory to where the scripts are held then enter:
<br><br>
shell > mysql --user=weberp --password='some_pass' < /path_to_the_sql_script/web-erp-demo.sql
<br><br>
or
<br><br>
shell > mysql --user=weberp --password='some_pass' < /path_to_the_sql_script/web-erp-new.sql
<br><br>
as required - modifying the user entered here as weberp to the user you created in mysql for the purpose and the password stated here as 'some_pass' to the password appropriate for the user and also the path_to_the_sql_script to the appropriate path perhaps something like /usr/local/httpd/htdocs/web-erp/
<br><br> 
<font size="+2"><b>Editing config.php</b></font>
<br><br>
config.php contains a series of user defined variables that determine how the system behaves. Critically it contains the host (computer name), username and password of the MySQL connection required to connect to the MySQL server. There is no going forward without the system being provided with this data.
<br><br>
The default contents of the config.php file are as follows and must be edited in an editor of choice (KATE, Wordpad etc) and then saved in the web directory where the scripts are. However, the system is continually evolving and may well have changed since this was written.
<br><br>
Lines beginning with a # are commented out. Sections beginning with 
/* are comments - they must be terminated with */
<br><br>
<&#x3F;php
<br>
/*WEB-ERP
<br>
by Logic Works Ltd
<br>
user definable variables - config.php*/
<br><br>
/*User Configurable variables
<br>
********************************
<br>
Please modify at will*/
<br><br>
/* the company name to appear in the headings on each page displayed */
<br><br>
$CompanyName = "WEB-ERP Demo System";
<br><br>
/* the default date format for entry of dates and display
*/
<br><br>
/* for England/Australia/NZ d/m/Y */
<br>
# $DefaultDateFormat = "d/m/Y";
<br><br>
/* for US and Canada */
<br>
$DefaultDateFormat = "m/d/Y";
<br><br>
/*Connection Information for the database
<br>
- host is the computer ip address or name where the database is the default is localhost assuming that the web server is also the sql server
<br>
*/
<br>
$host = "localhost";
<br><br>
/* - user is the user name under which the database should be accessed - need to change to the mysql (or other DB) user set up for purpose
<br>
NB it is not secure to use root as the user with no password - a user with appropriate privileges must be set up
<br>
*/
<br><br>
$dbuser = "weberp_db_user";
<br><br>
/* - password is the password the user of the database requires to be sent to authorise the above database user
<br>
*/
<br><br>
$dbpassword = "weberp_db_pwd";
<br><br>
/* - DatabaseName is the name of the database as defined in the RDMS being used. Typically RDMS allow many databases to be maintained under the same server.
<br>
The scripts for MySQL provided use the name logicworks
<br>
*/
<br>
$DatabaseName = "weberp";
<br><br>
/* CSS GUI theme */
<br>
// $theme = "professional"; 
<br>
$theme = "default";
<br><br>
/* Accounts Receivable */
<br>
/* Aging periods used on customer and supplier inquiry screens and aged listings*/
<br><br>
$PastDueDays1 = 30;
<br>
$PastDueDays2 = 60;
<br><br>
$DefaultCreditLimit = 1000;
<br><br>
/* Types of receipts - only add or remove elements of the array as required*/
<br><br>
$ReceiptTypes = array("Cheques", "Cash", "Visa", "American Express", "Diners Club", "MasterCard", "Direct Credit");
<br><br>
/* Order Items Selection */
<br><br>
/*In large databases it would be possible to return a gigantic page of parts if insufficient criteria were entered. This variable limits the output to the client browser to reduce waiting and clogging network connections */
<br><br>
$Maximum_Number_Of_Parts_To_Show = 100;
<br><br>
/*The number of quick entry fields to show on order entry and credit note entry */
<br><br>
$QuickEntries =10;
<br><br>
/*orders placed after this hour (an integer from 0 to 23) will be dispatched the following day */
<br><br>
$DispatchCutOffTime = 14;
<br><br>
/* Normally the stock location is determined with reference to the default location set up in the branch record of the customer selected - if not then the default location of the user is used,  if not the default below is used
<br><br>
$DefaultInventoryLocation = "DEN"; */
<br><br>
/*Inventory Units array*/
<br><br>
$InventoryUnits = array("each", "metres", "Kgs", "tonnes", "litres", "lbs", "dozen", "pack");
<br><br>
/*Freight calculations */
<br><br>
/*Default Shipper - this must be an existing Shipper_ID in the table Shippers */
<br>
$Default_Shipper = 1;
<br><br>
/*Set DoFreightCalc=True if the order entry should insist on calculating freight cost
<br>
Set to False if no freight calculation is forced */
<br><br>
$DoFreightCalc = False;
<br><br>
/* Set $FreightChargeAppliesIfLessThan to the amount below which freight is calculated
<br>
and charged */
<br><br>
$FreightChargeAppliesIfLessThan = 1000;
<br><br>
$CountryOfOperation = "Australia";
<br><br>
/* Number of periods of stock usage to show in stock usage inquiries */
<br><br>
$NumberOfPeriodsOfInventoryUsage = 12;
<br><br>
/* Accounts Payable */
<br><br>
/* System check to see if quantity charged on purchase invoices exceeds the quantity received.
<br>
If this parameter is checked the proportion by which the purchase invoice is an overcharge
<br>
referred to before reporting an error */
<br><br>
$Check_Qty_Charged_vs_Del_Qty = True;
<br><br>
/* System check to see if price charged on purchase invoices exceeds the purchase order price.
<br>
If this parameter is checked the proportion by which the purchase invoice is an overcharge
<br>
referred to before reporting an error */
<br><br>
$Check_Price_Charged_vs_Order_Price = True;
<br><br>
/* Proportion by which a purchase invoice line is an overcharge for a purchase order item received
<br>
is an overcharge. If the overcharge is more than this percentage then an error is reported and
<br>
purchase invoice line cannot be entered
<br><br>
The figure entered is interpreted as a percentage ie 20 means 0.2 or 20% not 20 times
<br>
*/
<br><br>
$OverChargeProportion = 20;
<br><br>
$OverReceiveProportion = 20;
<br><br>
/* If $PO_AllowSameItemMultipleTimes = True then purchase orders can have the same part on them several times - set to False checks to ensure that multiple lines of the same part are prohibited */
<br><br>
$PO_AllowSameItemMultipleTimes = True;
<br><br>
/* Types of payments - only add or remove elements of the array as required*/
<br><br>
$PaytTypes = array("Cheque", "Cash", "Direct Credit");
<br><br>
/* Email address of the person(s) who should receive the cheque listings */
<br>
$ChkListingReceipients = array ('"Finance Manager" <finance@company.com>');
<br><br>
/*Month number of last month in the company's financial year */
<br><br>
$YearEnd = "3";
<br><br>
/*Report Page Length in lines */
<br>
$PageLength = 48;
<br><br>
/*Directory under the main directory where part photos/ pictures are to be stored
<br>
NB no slashes are necessary. Part pictures in this directory must be .jpg format with this extension
<br>
Note that this directory must be created by the system administrator*/
<br><br>
$part_pics_dir = "part_pics";
<br><br>
/*Directory under the main web files directory where report files are to be created NB no slashes are necessary
<br>
Note that this directory must be created by the system administrator */
<br><br>
$reports_dir = "reports";
<br><br>
/* Whether to display the demo login and password or not - setting this to false will not display the demo text */
<br>
$allow_demo_mode = True;
<br><br>
/*Show debug messages returned from an error on the page.
<br>
Debugging info level also determined by settings in PHP.ini
<br>
if $debug=1 show debugging info, dont show if $debug=0 */
<br><br>
$debug=1;
<br><br>
/*Security Group definitions - Depending on the AccessLevel of the user defined in the user set up
<br>
the areas of functionality accessible can be modified.
<br>
Each AccessLevel is associated with an array containing the security categories that the user is entitled to access
<br>
Each script has a particular security category associated with it.
<br>
If the security setting of the page is contained in the security group as determined by the access level then the user will be allowed access.
<br><br>
Each page has a $PageSecurity = x; variable
<br><br>
This value is compared to contents of the array applicable which is based on the access level of the user.
<br><br>
Access authorisation is checked in header.inc this is where _SESSION["AccessLevel"] is the index of the SecurityGroups array. If you wish to add more security groups with then you must add a new SecurityHeading to the SecurityHeadings array
<br>
and a new array of Security categories to the Security Groups array
<br><br>
This mechanism allows more fine grained control of access
<br><br>
SecurityGroups is an array of arrays
<br><br>
The index is the order in which the array of allowed pages is defined new ones can be defined at will
<br>
or by changing the numbers in each array the security access can be tailored. These numbers need to read
<br>
in conjunction with the Page Security index
<br><br>
*/
<br>
$SecurityHeadings = array(
<br>
"Inquiries/Order Entry",
<br>
"Manufac/Inventory Admin",
<br>
"Purchasing Officer",
<br>
"AP Clerk",
<br>
"AR Clerk",
<br>
"Accountant",
<br>
"Customer Log On Only",
<br>
"System Administrator"
<br>
);
<br><br>
$SecurityGroups = array(
<br>
array(1,2),
<br>
array(1,2,11),
<br>
array(1,2,4),
<br>
array(1,2,5),
<br>
array(1,2,3),
<br>
array(1,2,3,4,5,6,7,8,9,10,11),
<br>
array(1),
<br>
array(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15)
<br>
);
<br><br>
/*Session save path is necessary where there may be several installations on the same server and the server cookie must be in different directories to avoid confusion. If there are two different companies using web-erp implementations on the same server, then it is important to ensure that different session directories are used for each web-erp system, otherwise session information from each system will overwrite the other system's session information ie the information about users, customer or transactional information. The session save path is also required where the server uses load balancing among several servers - one server must be used for the cookie - sourceforge.net uses load balancing and requires this for the demo. Normally this can be left as the default - as per php.ini /tmp or C:\windows\temp where there is only one web-erp system on the server*/
<br><br>
//$SessionSavePath='/home/groups/w/we/web-erp/sessions/';
<br><br>
/*EDI configuration variables definition */
<br><br>
/*EDI Draft version 01B - Controlling agency is the UN - EAN version control number (EAN Code) this info is required in the header record of every message sent - prepended with the message type*/
<br><br>
$EDIHeaderMsgId = "D:01B:UN:EAN010";
<br><br>
/*EDI Reference of the company */
<br><br>
$EDIReference = "WEBERP";
<br><br>
/* EDI Messages for sending directory - under the web-erp main scripts directory*/
<br><br>
$EDI_MsgPending = "EDI_Pending";
<br><br>
/* EDI Messages sent log directory */
<br><br>
$EDI_MsgSent = "EDI_Sent";
<br><br>
/* ******************END OF USER CONFIGURABLE VARIABLES ******************* */
<br><br>
/*The $rootpath is used in most scripts to tell the script the installation details of the files.
<br><br>
NOTE: In some windows installation this command doesn't work and the administrator must set this to the path of the installation manually:
<br>
eg. if the files are under the webserver root directory then rootpath =""; if they are under weberp then weberp is the rootpath - notice no additional slashes are necessary.
<br>
*/
<br><br>
$rootpath = dirname($_SERVER['PHP_SELF']);
<br>
//$rootpath = '/web-erp';
<br><br>
/*Its important to make sure there are no lines after the following "?>" */
<br>
&#x3F;>
<br><br>
<font size="+2"><b>Logging In For the First Time</b></font>
<br><br>
Open a browser connected to the network upon which the web-server is also connected and enter the URL for the web server directory where web-erp is installed if the browser is on the same machine as the server then perhaps:
<br><br>
http://localhost/web-erp/index.php
<br><br>
enter the user name of 'demo'
<br>
password 'weberp'
<br><br>
(the quotation marks are not required).
You can set up additional user accounts from the System Setup tab and change the password. Be careful not to delete the demonstration user until a new System Administrator user has been set up. If there are no users defined the next time you try to login you won't be able to! In this situation the only way then to create a user to login with is to manually edit the SQL table WWW_Users to insert a user. If phpMyAdmin is installed on the web server as well then this can be achieved by adding a new record to WWW_Users.
<br><br>
NB The importance of setting a password for the root user of MySQL, otherwise anyone could modify WWW_Users and gain access  to private company information.
<br><br>
<font size="+2"><b>Themes and GUI Modification</b></font>
<br><br>
Often what visually appeals to one does not appeal to another. Whilst accounting software is primarily about function - appearances do matter! Some flexibility is available with the color scheme and font sizes of the GUI using cascading style sheets. (css)
<br><br>
The user interface can be modified by adopting one of the defined themes or making up a new theme. There are currently only two themes defined in the distribution - 'default' and 'professional'.
<br><br>
In config.php the variable:
<br><br>
$theme = "professional";
<br><br>
can be changed to 
<br><br>
$theme = "default";
<br><br>
for a different look.
<br><br>
To make up a new theme copy the directory of one of the defined themes to a new name. The the themes are held under the css directory of the distribution, there is a directory under the css directory for each theme. Having copied the files to a new directory say 'New_theme' they should be edited to reflect the look desired. The variable in config.php should be edited to:
<br><br>
$theme = "New_theme";
<br><br>

<!-- Help Begin: WWW_Users -->

<font size="+2"><b>Setting Up Users</b></font>
<br><br>
Having logged in as the demonstration user. A new user should be defined whom has administrative privileges and the demonstration user should be deleted. From the menu click on the Setup tab and the select Set Up User Accounts, the users defined are displayed and User names must be 5 characters or more and the password entered must be 5 characters or more too. The password cannot also be the user name or contain the user name. It is not necessary to enter the full name telephone and other details. The access level selected is important as this determines the pages that the user can access. In any business where the employees are not also the owners it is advisable to split the functions between staff so that no user can complete an entire transaction. There are occasions in smaller businesses where this is impractical. However, the system has great flexibility to allow the user access to be finely defined. See the security schema section. 
<br><br>
As well as allowing the access to be restricted there is some flexibility about the links that are made available to a user. In the user account screen the system administrator can define which tabs of the main menu are activiated and available to the user.
<br><br>
There is also the facility to set up customers with their own logon. This restricts them to inquiries on their account including invoice re-prints and to entering new sales order. Customer logins do not allow any modification to the pricing. To do this the access level must be set to customer logon and the settings for customer logon in config.php must not be modified - ie $PageSecurity = 1 allowed only. In addition, the customer code and branch code applicable to the person logging on must be entered.
<br><br>
<font size="+3"><b><A NAME=Security>Security Schema</A></b></font>
<br><br>
The user name and password combination entered at logon enables the system to identify the permissions appropriate to the user. It is possible to determine and restrict which pages a user should be able to access. Each user is allocated to an Access Level or Security Group. 
<br><br>
The Security group must be defined in config.php in two ways. 
<br><br>
<ul>
<li>The Security Group Headings are defined in an array called SecurityHeadings.
<li>The Security Group page access codes applicable to the group must be defined in the SecurityGroups array - in the same order as the SecurityHeadings array. Ie the first security heading refers to the first array stored in the SecurityGroups array.
</ul>
Each script is defined as having a specific PageSecurity level. At the time of writing this is a number between 1 and 15 - if more levels of security are necessary then this can be expanded. The current PageSecurity settings applicable for each page are set out in the table below.
<br><br>
If the PageSecurity setting of the page is a number contained in the SecurityGroup array as determined from the users access level then the user will be allowed access to the page. The user access level is an integer that represents the index number of the array element of the SecurityGroups array defined in config.php.
<br><br>
Access authority is checked in header.inc script for all pages (or PDF_Starter.inc for PDF pages). The variable $_SESSION["AccessLevel"] is retrieved from the database when the user logs in. This variable refers to the index of the SecurityGroups array or arrays. The array of numbers that is referenced by this index defines the pages a user can see. Any page that has a $PageSecurity equal to any value in this array is deemed to be an authorised page.
<br><br>
If you wish to add more security groups then you must add a new Security Heading to the $SecurityHeadings array and a new array of PageSecurity numbers to the $SecurityGroups array. This mechanism allows the system administrator to closely and accurately control who can access what.
<br><br>
By changing the numbers in each array the security access can be tailored for all users referring to the array being modified. When setting the numbers in the array, reference to the index of PageSecurity values below will be necessary. Of course the value of the default settings can easily be modified.
<br><br>
The default settings in config.php are as follows:
<br><br>
Index Group
<br><br>
0 Inquiries Only
<br>
1 Manufacturing/Inventory Admin
<br>
2 Purchasing officer
<br>
3 AP Clerk
<br>
4 AR Clerk
<br>
5 Accountant
<br>
6 Customer logon 
<br>
7 System Administrator
<br><br>
to achieve this the following array for $SecurityHeadings is defined - the index number starting from 0 is incremented for each entry:
<br><br>
$SecurityHeadings = array(
<br>
"Inquiries/Order Entry",
<br>
"Manufac/Inventory Admin",
<br>
"Purchasing Officer",
<br>
"AP Clerk",
<br>
"AR Clerk",
<br>
"Accountant",
<br>
"Customer Log On Only",
<br>
"System Administrator"
<br>
);
<br><br>
the corresponding array of SecurityGroup arrays is defined in config.php also. The first array (1,2) refers to the page security numbers that a user with "Inquiries/Order Entry" access would be authorised to view.
<br><br>
$SecurityGroups = array(
<br>
array(1,2),
<br>
array(1,2,11),
<br>
array(1,2,4),
<br>
array(1,2,5),
<br>
array(1,2,3),
<br>
array(1,2,3,4,5,6,7,8,9,10,11),
<br>
array(1),
<br>
array(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15)
<br>
);
<br><br>
The system continues to evolve and the information set out below may be different in the current version. By default, each page has the variable $PageSecurity defined as follows:
<br><br>
<table border="2">
<th>Script File Name
<th>PageSecurity value 
<tr>
<td>
index.php
</td>
<td>
1
</td>
</tr>
<tr>
<td>
CustomerInquiry.php
</td>
<td>
1
</td>
</tr>
<tr>
<td>
DeliveryDetails.php
</td>
<td>
1
</td>
</tr>
<tr>
<td>
SelectOrderItems.php
</td>
<td>
1
</td>
</tr>
<tr>
<td>
AccountGroups.php
</td>
<td>
10
</td>
</tr>
<tr>
<td>
GLAccounts.php
</td>
<td>
10
</td>
</tr>
<tr>
<td>
GLJournal.php
</td>
<td>
10
</td>
</tr>
<tr>
<td>
BankAccounts.php
</td>
<td>
10
</td>
</tr>
<tr>
<td>
COGSGLPostings.php
</td>
<td>
10
</td>
</tr>
<tr>
<td>
CompanyPreferences.php
</td>
<td>
10
</td>
</tr>
<tr>
<td>
PaymentTerms.php
</td>
<td>
10
</td>
</tr>
<tr>
<td>
SalesGLPostings.php
</td>
<td>
10
</td>
</tr>
<tr>
<td>
InventoryCostUpdate.php
</td>
<td>
10
</td>
</tr>
<tr>
<td>
Prices_Customer.php
</td>
<td>
11
</td>
</tr>
<tr>
<td>
Prices.php
</td>
<td>
11
</td>
</tr>
<tr>
<td>
InventoryAdjustments.php
</td>
<td>
11
</td>
</tr>
<tr>
<td>
Inventorys.php
</td>
<td>
11
</td>
</tr>
<tr>
<td>
InventoryTransfers.php
</td>
<td>
11
</td>
</tr>
<tr>
<td>
FreightCosts.php
</td>
<td>
11
</td>
</tr>
<tr>
<td>
GoodsReceived.php
</td>
<td>
11
</td>
</tr>
<tr>
<td>
Locations.php
</td>
<td>
11
</td>
</tr>
<tr>
<td>
InventoryCategories.php
</td>
<td>
11
</td>
</tr>
<tr>
<td>
TaxAuthorities.php
</td>
<td>
15
</td>
</tr>
<tr>
<td>
WWW_Users.php
</td>
<td>
15
</td>
</tr>
<tr>
<td>
Z_CreateCompany.php
</td>
<td>
15
</td>
</tr>
<tr>
<td>
Z_DeleteCreditNote.php
</td>
<td>
15
</td>
</tr>
<tr>
<td>
Z_DeleteInvoice.php
</td>
<td>
15
</td>
</tr>
<tr>
<td>
Z_DeleteSalesTransActions.php
</td>
<td>
15
</td>
</tr>
<tr>
<td>
Z_index.php
</td>
<td>
15
</td>
</tr>
<tr>
<td>
Z_MakeInventoryLocns.php
</td>
<td>
15
</td>
</tr>
<tr>
<td>
Z_RePostGLFromPeriod.php
</td>
<td>
15
</td>
</tr>
<tr>
<td>
Z_ReverseSuppPaymentRun.php
</td>
<td>
15
</td>
</tr>
<tr>
<td>
Z_UpdateChartDetailsBFwd.php
</td>
<td>
15
</td>
</tr>
<tr>
<td>
Z_UploadForm.php
</td>
<td>
15
</td>
</tr>
<tr>
<td>
Z_UploadResult.php
</td>
<td>
15
</td>
</tr>
<tr>
<td>
SalesTypes.php
</td>
<td>
15
</td>
</tr>
<tr>
<td>
Shippers.php
</td>
<td>
15
</td>
</tr>
<tr>
<td>
AgedDebtors.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
AgedSuppliers.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
ConfirmDispatch_Invoice.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
CustomerTransInquiry.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
FTP_RadioBeacon.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
InventoryPlanning.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
InventoryValuation.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
OrderDetails.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
PeriodsInquiry.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
PO_PDFPurchOrder.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
PO_SelectPurchOrder.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
PrintCustOrder.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
PrintCustStatements.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
PrintCustTrans_A4_Portrait.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
PrintCustTrans.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
SalesAnalReptCols.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
SalesAnalRepts.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
SalesAnalysis_UserDefined.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
SelectCompletedOrder.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
SelectCustomer.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
SelectProduct.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
SelectSalesOrder.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
SelectSupplier.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
ShiptsList.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
InventoryMovements.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
InventoryStatus.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
InventoryUsage.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
SupplierInquiry.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
BOMInquiry.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
BOMListing.php
</td>
<td>
2
</td>
</tr>
<tr>
<td>
Credit_Invoice.php
</td>
<td>
3
</td>
</tr>
<tr>
<td>
CustomerAllocations.php
</td>
<td>
3
</td>
</tr>
<tr>
<td>
CustomerBranches.php
</td>
<td>
3
</td>
</tr>
<tr>
<td>
CustomerReceipt.php
</td>
<td>
3
</td>
</tr>
<tr>
<td>
Customers.php
</td>
<td>
3
</td>
</tr>
<tr>
<td>
PDFBankingSummary.php
</td>
<td>
3
</td>
</tr>
<tr>
<td>
SelectCreditItems.php
</td>
<td>
3
</td>
</tr>
<tr>
<td>
Areas.php
</td>
<td>
3
</td>
</tr>
<tr>
<td>
CreditStatus.php
</td>
<td>
3
</td>
</tr>
<tr>
<td>
SalesPeople.php
</td>
<td>
3
</td>
</tr>
<tr>
<td>
PO_Header.php
</td>
<td>
4
</td>
</tr>
<tr>
<td>
PO_Items.php
</td>
<td>
4
</td>
</tr>
<tr>
<td>
PurchData.php
</td>
<td>
4
</td>
</tr>
<tr>
<td>
InventoryReorderLevel.php
</td>
<td>
4
</td>
</tr>
<tr>
<td>
Payments.php
</td>
<td>
5
</td>
</tr>
<tr>
<td>
SuppCreditGRNs.php
</td>
<td>
5
</td>
</tr>
<tr>
<td>
SuppInvGRNs.php
</td>
<td>
5
</td>
</tr>
<tr>
<td>
SupplierAllocations.php
</td>
<td>
5
</td>
</tr>
<tr>
<td>
SupplierContacts.php
</td>
<td>
5
</td>
</tr>
<tr>
<td>
SupplierCredit.php
</td>
<td>
5
</td>
</tr>
<tr>
<td>
SupplierInvoice.php
</td>
<td>
5
</td>
</tr>
<tr>
<td>
Suppliers.php
</td>
<td>
5
</td>
</tr>
<tr>
<td>
SuppPaymentRun.php
</td>
<td>
5
</td>
</tr>
<tr>
<td>
SuppShiptChgs.php
</td>
<td>
5
</td>
</tr>
<tr>
<td>
SuppTransGLAnalysis.php
</td>
<td>
5
</td>
</tr>
<tr>
<td>
BankMatching.php
</td>
<td>
7
</td>
</tr>
<tr>
<td>
BankReconciliation.php
</td>
<td>
7
</td>
</tr>
<tr>
<td>
GLAccountInquiry.php
</td>
<td>
8
</td>
</tr>
<tr>
<td>
GLCodesInquiry.php
</td>
<td>
8
</td>
</tr>
<tr>
<td>
GLTransInquiry.php
</td>
<td>
8
</td>
</tr>
<tr>
<td>
GLTrialBalance.php
</td>
<td>
8
</td>
</tr>
<tr>
<td>
SelectGLAccount.php
</td>
<td>
8
</td>
</tr>
<tr>
<td>
BOMs.php
</td>
<td>
11
</td>
</tr>
<tr>
<td>
WorkCentres.php
</td>
<td>
11
</td>
</tr>
</table>

<!-- Help End: WWW_Users -->

<br>
<font size="+3"><b><A NAME=CreateSystem>To Create a New System</A></b></font>
<br><br>
<font size="+2"><b>Running the Demonstration Database</b></font>
<br><br>
The demonstration system has bogus data already entered so that the features of the system can be explored without creating data from scratch. If all that you wish to do is explore the features available then the demonstration data supplied is all you need. There is certain base Data that determines how the system works. This base information is defined from the System Setup tab of the main menu as well as the file config.php. To run the demonstration system it is not necessary to modify any of these, save for modifying the details for the mysql connection in config.php. 
<br><br>

<!-- Help Begin: CompanyPreferences -->

<font size="+2"><b>Setting Up A System</b></font>
<br><br>
For the company logo to appear on the each screen, it must be saved in the format of a .jpg file and be copied to the file logo.jpg in the directory with all the other php scripts. The logo needs to have read permissions for the user that the web server is running as normally "nobody" for apache on linux. Permissions issues are a none issue under windows.
<br><br>
Company parameters need to be set correctly from the company set up screen. Most of these parameters are self -explanatory. Company name, company number, postal address, physical address etc. Also, telephone numbers and the default home currency of the business. If the default currency is not already set up, then from the main menu system set up tab, the link to the currency maintenance form allows new currencies to be defined and for default rates to be updated.
<br><br>
The company record also provides a convenient place to store default GL codes for:
<br><br>
<ul>
<li>Debtors Control GL Account:
<li>Creditors Control GL Account: 
<li>Payroll Net Pay Clearing GL Account:
<li>Goods Received Clearing GL Account:
<li>Retained Earning Clearing GL Account: 
<li>Freight Re-charged GL Account: 
<li>Exchange Variances GL Account: 
<li>Sales Exchange Variances GL Account:
<li>Purchases Exchange Variances GL Account: 
<li>Payment Discount GL Account:
</ul>
A default chart of accounts is set up. However, in most cases the company will wish to adopt the chart of accounts it has used traditionally. Chart of accounts maintenance - deletion of accounts and adding of new accounts is done from the General Ledger tab. This would be a starting point for data input of a new system. Where the GL integration features are to be used, setting up the chart of accounts will be a necessary first step.
<br><br>
The company record also records the GL integration set up:
<br><br>
<ul>
<li>Create GL entries for accounts receivable transactions
<li>Create GL entries for accounts payable transactions:
<li>Create GL entries for stock transactions (at standard cost): 
</ul>
Notice that the stock GL integration is a separate flag. If GL integration of accounts receivable is set to yes, then GL journals are created for invoices and credits to sales and debtors but not for cost of sales and stock. For the later integration this requires that the GL entries for stock transactions be set to yes also.

<!-- Help End: CompanyPreferences -->

<br><br>
Before customers can be set up the following base information is required (all this information is set up from the system setup tab):
<br><br>
<ul>
<li>Currencies - the currency of the customers account
<li>Sales types - prices are set up at this level. The sales type combined with the currency of the customer determines the price list that is applicable to them. Each customer master record must refer to a sales type.
<li>Credit Status records, these are flags for recording the credit -worthiness of the customer. Each customer account refers to a credit status type. Some credit status records can be set up to prohibit invoicing.
<li>Payment terms. As many terms records as necessary can be defined and the customer record must refer to a payment terms record. There is some flexibility as to how these are defined. They can refer to a number of days credit or to a given day in the month following invoice. Aged balances reports produced for customers and suppliers are based on the terms.
</ul>
Once the above information is entered then customer records can be entered.
<br><br>
However, accounts receivable also requires that certain branch information, relating to delivery address etc must be entered against each customer. But before customer branches can be created the following base information must be entered - the links to the forms that allow all this information to be defined are available from the main menu under system set up:
<br><br>
<ul>
<li>Sales areas - these are for analysing sales by area. Also, GL integration can be set up to look at the area of the customer to determine the GL account to post sales to. Each branch of a customer's account must refer to a sales area. If sales areas are not necessary in your business a single area must be defined - called say "default area"
<li>As many sales types as required can be set up. It should be borne in mind that prices are held against sales types (and currencies). The sales type would reflect whether the sale was a trade sale, retail, wholesale, indent, cash sale, special sale etc.
<li>Customer branch records also must refer to a sales person responsible for managing the relationship and who takes the credit for sales to the branch. If the sales people are not necessary for your business, then a single salesperson must still be defined who could be called default or similar.
<li>Locations that stocks can be held in need to be set up. Each customer branch needs to refer to the stock location that it would be most freight efficient to draw stock from.
</ul>
Having got this base information set up then the business of setting up customer accounts and customer branches with delivery addresses can start.
<br><br>
Desktop databases, spreadsheets and comma separated variables (CSV) export files can also be used to import this information. Using MS Access, the process involves installing an ODBC driver for MySQL on the windows desktop machine that has MS Access on it and then attaching to the weberp database tables DebtorsMaster and CustBranch in a new blank Access database. The CSV file or the spreadsheet is imported into the Access database, then an append query is made to map the fields from the CSV table/spreadsheet into DebtorsMaster and or CustBranch. There are potentially many records in CustBranch each with a different branch code for one customer account in DebtorsMaster. This method is dangerous in the sense that it is imperative to ensure that no customer records or branch records refer to non-existent base data in the fields described above.
<br><br>
<font size="+1"><b>Setting Up Inventory Items</b></font>
<br><br>
Before stock items can be defined, again the base information is necessary.
<br><br>
<ul>
<li>Inventory Categories are the broad headings under which the company's products (or services) fall. Inventorys can also include service items such as labour. Held in the stock category record is all the additional information required for stock integration to the general ledger. All stock items set up referring to a particular stock category will be posted the same way. Inventory categories are defined under the system set up tab.
<li>Config.php contains an array variable for all the potential units of measure appropriate to stock items. Additional units can be defined by editing config.php. Each stock item defined must refer to a unit of measure defined in this array.
</ul>
Inventory Items can be created for non-physical stocks such as labour time for the purposes of invoicing and analysis, these should be set to Dummy Inventory Items - using the Make Or Buy Flag.
<br><br>
<font size="+1"><b>Entering Inventory Balances</b></font>
<br><br>
Once information about stock items is all entered and by implication the base data required first (preferably all in advance), the stock balance at each stock location must be entered as stock adjustments. 
<br><br>
The stock/general ledger interface should be disabled in the company preferences screen until the stock balance in the general ledger (which would be set up using a manual journal in the general ledger) is reconciled to the standard cost of all stock items entered into the system, per the stock valuation report. This reconciliation requires that the standard cost for each stock item entered be correct as well as the total units held in all locations. 
<br><br>
<font size="+1"><b>Inventory Ledger Integration to General Ledger Issues</b></font>
<br><br>
Once the reconciliation of the stock accounts in the financials module agrees to the stock valuation report, the stock general ledger integration flag can then be re-enabled from the company preferences form. Movements in stock will then be reflected with general ledger journals. The balance of the stock accounts should then always agree to the stock valuation report provided there are no manual journals entered to these accounts.
<br><br>
It is important to understand the two levels of General Ledger integration available. 
<br><br>
Firstly, sales integration allows integration of invoices, credits and receipts to sales and debtors control accounts. This level does not produce any general ledger journals for the cost of stock sold. The system has flexible configuration allowing many ways to configure the accounts to which invoices and credits are posted to the sales accounts. 
<br><br>
Secondly, stock integration enables the automatic creation of general ledger journals for the cost of sales and the stock accounts. Also, stock movements from purchase order arrivals and sales of stock are also documented as general ledger journals.
<br><br>
It is not necessary to use the stock integration to the general ledger although a fully standard costing based accounting system with full general ledger integration, will arguably provide the fastest and most informative financial reporting system for manufacturers. 
<br><br>
<font size="+1"><b>Setting Up Customers</b></font>
<br><br>
As many branches as required can be set up, it is recommended that branches be used liberally for all customer contacts even though the branch may not be invoiced. Thus all contacts can be kept against the customer they belong with. Each branch requires a sales area and a salesperson. Sales Areas are the areas defined for analysis purposes. Both Sales Areas and Salespeople are set up from the System Setup tab of the main menu.
<br><br>
<font size="+1"><b>Entering Customer Balances</b></font>
<br><br>
The debtors ledger is an "open item" system which needs each invoice outstanding to be entered to reconcile the account balance. This can be quite a daunting task for a business that has previously operated on balance forward debtor accounts. However, the additional information that the customer will receive together with the reduced monthly reconciliation headaches for customers who have lost track of what their balance is made up of, will more than compensate for the extra work required initially. Open item debtors also require that any money received is allocated to outstanding invoices.
<br><br>
Ideally, all the opening transactions should be entered immediately prior to a month end. Opening balance transactions can then be easily identified as belonging to a period when no normal business was effected. The first step is to ensure that the General ledger interface is disabled to prevent journals being created to sales and debtors control account for invoices which relate to a prior period. It is suggested that reconciliation's be prepared during the month prior to going live for all customers - if an open item system was used previously, then the statement will provide all the information necessary for input. All invoices (and credit notes) outstanding need to be entered to reconcile the balance on the customer's account, using the same exchange rate as was used when the invoice was originally created. It is recommended that the actual date of the invoice is used as per the original invoice and a reference of the old invoice number is used so that it is easy to cross reference the new invoice number to the old one.
<br><br>
<font size="+1"><b>Reconciling the Debtors Ledger Control Account</b></font>
<br><br>
It is important to check that the balance on all customers accounts from the aged listing agrees to the control account in the old system, in both local and overseas currency. The balance in the general ledger (of all customer balances) would normally be entered as a manual journal, but the amount of this journal should agree to the amount as per the customer listing. Of course balances entered in different currencies will have a different local value depending upon the rate at which they were entered. There is a facility to value all the currency balances in local currency looking at the rate at which each transaction was entered. This is the script Z_CurrencyDebtorBalances.php. A similar facility is available for suppliers balances. A double check should be done account by account before going live. Once all customer accounts are reconciled and entered (and double checked) the General Ledger interface should be re-enabled from the Company preferences screen (System Setup Tab). The system will then maintain the control account in the general ledger which should always agree to the list of balances.
<br><br>
<font size="+1"><b>Finally</b></font>
<br><br>
Once all entries are made to reconcile the customers accounts with the general ledger debtors account the system should be backed up. The mysql utility mysqldump is one method that produces an sql script that will restore the system to where it was when the script was created. With users out of the system - to avoid any locking issues - and assuming mysqldump is in the system path:
<br><br>
Using a username and password as created when mysql was installed.
<br><br>
#mysqldump -u username -p password --opt weberp > /home/myhomedir/weberp_backup.sql
<br><br>
<font size="+3"><b><A NAME=Conventions>System Conventions</A></b></font>
<br><br>
<font size="+2"><b>Navigating the Menu</b></font>
<br><br>
The system is built around a main screen from which all functions can be accessed, without recourse to several layers of menus in most cases. The menu is a tabbed style, whereby the user can select the broad subject of the options they wish to use - Orders, Accounts Receivable, Accounts Payable, Purchasing, Inventory, Manufacturing, General Ledger, System Setup. The options available are then divided into Maintenance, Transactions, inquiries and Reports. The options relevant are shown on the right. A single click on the text link of the option required immediately actions it. 
<br><br>
In addition to the tabbed main menu links, all screens also show links to select a customer, select an item and select a supplier. These links take the user directly to the selection forms and once a selection is made the options relevant to a specific customer or a specific item or a specific supplier are shown and available to be accessed directly from the short cut links from these sub-menu screens. In most cases an inquiry or transaction will require selection of at least on of the three and the links available from these selection pages allow most functions to be carried out with minimal navigation.
<br><br>
<font size="+2"><b>Reporting</b></font>
<br><br>
All screens and inquiries are printable directly from the browser window. The format of the printing varies depending on the browser. Most browsers offer some flexibility.
<br><br>
Many reports create Adobe (c) Portable Document Format (.pdf) report files. The benefit of using pdf files is that:
<br><br>
<ul>
<li>The report files produced are compressed and are retrieved more easily over low bandwidth connections. 
<li>They can be saved locally and emailed to third parties as required.
<li>The software to read pdf files is a free download from Adobe and available for all operating systems and platforms even PDA devices.
<li>The pdf files produced position text and graphics accurately to ensure that any pre-printed stationary is accurately aligned with printed output.
<li>Many Web Browsers have pdf functionality built in or as an add on module.
</ul>
Some users have reported issues with reading the pdf files created. The most common issue is with navigation. Some browsers open pdf files actually within the browser. The difficulty with this is that the links to navigate the system then disappear and hitting the back button of the browser does not work with dynamic scripts so well. The preferred solution is to open the pdf documents created in a separate window. This is achieved by opening adobe acrobat reader separately then modifying the preferences to disable the "Display pdf in browser" option. This forces a new window for Acrobat reader.
<br><br>
<font size="+3"><b><A NAME=Inventory>Inventory (aka "Stock")<A></b></font>
<br><br>
<font size="+2"><b>Overview</b></font>
<br><br>
In many cases due to the English background of the developer, Inventory is referred to as stock, which can be confusing to some. The word stock is used interchangeably with Inventory throughout.
<br><br>
Inventories fall into clear categories particular to the business. For example a toy factory might have categories for lego, rideons, board games etc . These are referred to as stock categories and are expected to be defined by the business. The name of the category (but not its code) can be altered at any time. 
<br><br>
Note: Integration to the general ledger is at the stock category level. The posting to the general ledger is determined by reference to the stock category of the item together with the sales area and the sales type. Separate tables of general ledger codes for sales and cost of sales are maintained from the System Setup tab of the main menu.
<br><br>
Inventory invoiced using the invoicing option will decrease the stock on hand from the stock location specified in the invoice. Inventory credited using the credit note creation option will increase the stock held at the location selected in the credit note. Inventory adjustments to the quantity held are also possible and transfers between stock locations.
<br><br>
A record of each stock movement is maintained, stock movements originating from sales invoices, purchase orders received, stock adjustments, sales credit notes can all be viewed using the inquiry of stock movements. Summing the stock movements provides an easy mechanism to see the historical usage and an inquiry is also available to show usage by month. 
<br><br>
Inventories are valued at standard cost. If general ledger stock integration is active, general ledger postings are created for stock adjustments, standard cost amendments, cost of sales and stock movements on invoicing and crediting. When stock journals are used, provided that the balance of the stock accounts agrees to the current valuation of the stock at the time when the flag is set in the company preferences page, then the value of stock held will be maintained in the general ledger, with a full trail of general ledger journals for each stock movement. This does make for a busy, but informative general ledger in a high use environment!
<br><br>
Note: Inventory journals are optional. The sales ledger/accounts receivable interface is separate to the stock general ledger interface.
<br><br>
<font size="+2"><b>Inventory System Features</b></font>
<br><br>
<ul>
<li>Multiple warehouses, stock quantities maintained for an unlimited number of locations.
<li>Prices for a stock item can be set for each sales type defined in any (and all) currency (ies) allowing great pricing flexibility.
<li>Automatic back ordering. Sales orders yet to be delivered can be automatically back ordered at the time of invoicing or the balance of the order cancelled as appropriate.
<li>History of stock movements maintained by stock item. 
<li>Allows Dummy stock items which can be invoiced, priced, costed but with no stock record maintained for items such as labour or services.
<li>Kit-set parts can be defined. An order for a kit-set part explodes into the components defined for the parts at the predefined quantities as extended by the number of the kit set item ordered. These component quantities are then available on the order for modification by the user.
<li>Assembly parts can be defined in a similar way to kit sets. These parts exist only for ordering, invoicing and sales analysis. No stock balance is maintained, instead the quantities of the components are updated in proportion to the quantity defined in the assembly.
<li>Invoice and credit note inquiries are inked to stock movements so the detail of items sold on an invoice can be queried.
<li>Standard cost maintained and valuation reports
<li>Inventory usage by month inquiry by location and overall
<li>Inventory planning report
<li>Integration with purchasing, accounts payable, accounts receivable and general ledger.
</ul>

<!-- Help Begin: Stocks -->

<font size="+2"><b>Adding Inventory Items</b></font>
<br><br>
Entry of new items requires the input of certain base information:
<br><br>
<ul>
<li>Base information about the Code and description together with the category and item type.
<li>Cost information
<li>Supplier purchasing data
<li>Selling prices
</ul>
Entry of the base information is done from the menu, select the inventory tab and click "Add a New Inventory Item". 
<br><br>
<font size="+1"><b>Item Code</b></font>
<br><br>
A stock code is required for each stock item, this can be any combination of characters up to 20 characters long. The coding structure of stock items should be considered, to ensure that like stock items appear together. Internally the system looks at the code to order stock items in the various look up tables. A systematic approach to naming stock items can save a lot of time later. Under supplier purchasing data it is also possible to record the supplier's part number against an item.
<br><br>
There is a script that allows for stock codes to be modified retrospectively, the script goes through all the tables necessary, location stocks, bills of material, order details, purchase order details, sales analysis etc to ensure that all history for the new part code follows the change. The script together with all utility scripts is available from Z_index.php (there are no links to this utility menu - due to the dangerous nature of some of the utilities) The stock code change script itself is named, Z_ChangeStockCode.php.
<br><br>
<font size="+1"><b>Part Descriptions</b></font>
<br><br>
A description of the stock item - can be up to 50 characters long. A description is required for each stock item. This description is used in the look up boxes provided each time the stock item is invoiced, credited or adjusted. There is also the facility to enter long descriptions for each part which show on the screens that customers could access to place orders. This field allows very long descriptions or even features and benefits to be described for the item. The intention for this field is that it could be used for producing a company catalogue or for online ordering by customers who may need more information about a product. It is only the description (short) that displays on invoices and credit notes.
<br><br>
<font size="+1"><b>Categories</b></font>
<br><br>
These categories need to be set up first - from the System Setup tab of the menu. In selecting the stock category, be aware that the system uses the category information for analysis and summary reporting as well as identifying accounts for standard cost general ledger integration, if this option is enabled. There is a link to create new stock categories from the stock item entry page.
<br><br>
A stock category is required for all stock items. The stock category is a text field which groups like stock items together. In selecting stock it is often useful to restrict the search to just the category required. A stock category select box shows on the Select Product screen for this purpose.
<br><br>
<font size="+1"><b>Unit of Measurement</b></font>
<br><br>
This field describes how the stock is to be maintained and is self-explanatory. It is a compulsory field. The selection list is maintained in config.php as an array variable. To add or delete other units of measurement the array variable called $InventoryUnits defined in config.php must be edited by the system administrator.
<br><br> 
<font size="+1"><b>Economic Order Quantity</b></font>
<br><br>
This is the quantity that new orders are made or purchased in by default. Currently this is purely for memorandum - in future this will be a critical part of the MRP calculations.
<br><br>
<font size="+1"><b>Packaged Volume</b></font>
<br><br>
This field is required for freight calculations. It records the volume of the one of the item as packaged for dispatch. See the section on freight calculations.
<br><br>
<font size="+1"><b>Packaged Weight</b></font>
<br><br>
This field is required for freight calculations. It records the weight of the one of the item as packaged for dispatch. The freight calculation takes the higher of the freight costs based on the total weight of the order and the total volume of the order. Most freight companies use a conversion and charge the higher of the two. See the section on freight calculations.
<br><br>
<font size="+1"><b>Units of Measure</b></font>
<br><br>
A select box allows the units applicable to the item to be selected from the array of $StockUnits defined in config.php. The unit of measure will show on all invoices and on stock inquiries.
<br><br>
<font size="+1"><b>Current or Obsolete</b></font>
<br><br>
If this field is set to obsolete, this indicates that the stock item is no longer used. However, there may be a stock history on invoices and credit notes which are required. The stock item master record is therefore still required. (Deletion is not allowed while stock movements or Sales analysis records exist for the part) However, it will not appear on searches for invoicing, stock items, in addition the item will be flagged as discontinued in stock reports.
<br><br>
<font size="+1"><b>Make Or Buy</b></font>
<br><br>
This field is compulsory and indicates whether the stock item is:
<br><br>
Manufactured
<br><br>
Purchased from an external supplier. 
<br><br>
An assembly of other stock items. An assembly item does not have a physical stock holding itself, nor has it a cost. An invoice for an assembly item creates the stock movements for all the components of the item and the stock of each of the components in proportion to the requirements specified in the bill of material are decremented. The cost of sales entries in the general ledger journals created by an invoice (if the link is active) is created at the sum of the costs of all the items in the bill of material for the assembly as at the time of invoicing.
<br><br>
A kit set of other stock items that should be exploded into its components when ordered. A kit set is not a physical item itself it is just a short cut to entering a number of parts onto an order. Unlike an assembly, the kit set part does not appear on invoices or orders, but "explodes" into its component parts for modification. It follows that kit sets do not have any cost or physical stock quantities associated with them.
<br><br>
A dummy item that has no physical stock associated with it.
<br><br>
This field is relevant for MRP and production scheduling. This field can also be set to Dummy Inventory Item - which then disables stock quantity tracking at the locations and in total. Dummy stock items are used for invoicing services and labour or even physical items which do not require tracking. The stock movement records are still created and are available to recall on invoicing and credit note inquiries. Inventory adjustments are not allowed for Dummy Inventory Items. Assembly items can have sales analysis records created for them, but no stock quantity is maintained and stock movement records are created for the components. Assemblies would normally be used where the warehouse keeps the components of the item for several different purposes and only assembles the items as they are picked for dispatch.
<br><br>
<b>Setting Up Assembly Items</b>
<br><br>
Using the example of toilet suites, where the business wishes to keep track of how many sold - i.e. The sales analysis - but only wishes to track the quantities of stock held of the toilet pans and toilet cisterns that make up the suite.
<br><br>
The business will never want to hold stock of made up suites, when stock is counted only cisterns and pans are counted not suites. If there are any made up suites these would need to be broken down into their components and the components included in the stock counts.
<br><br>
Such parts are called "Assembly" items by the system.
<br><br>
When an assembly item is invoiced, the stock of the components of the assembly are decreased by the quantity in its bill of material multiplied the number of the assembly item sold.
<br><br>
eg. A suite that has 2 screws in it to screw the pan to the floor might have a bill of material:
<br><br>
1 x cistern
<br>
1 x White S trap pan
<br>
2 x Pan screws
<br>
1 x pan pac carton
<br><br>
If the sale was for 10 of these - the stock of the cistern, pan and pan-pac cartons would be reduced by 10 and the stock of the pan screws would be reduced by 20. The stock movement inquiry shows this movement and the reference to the assembly item that it came from and the invoice number it was sent out on.
<br><br>
It is important to remember that when an assembly item is credited this process happens in reverse - stock is booked back into the components in exactly the same way as it is invoiced out. The credit note must be entered against the correct stocking location otherwise the pan and cistern stocks in the location where the stock did get returned to and the location where the credit note was entered to will be wrong. There is facility to write the stock off at the time of credit note entry also - in this case the stock location is not important.
<br><br>
This next point is a little confusing. The system also shows the movement of assembly items in the movement inquiry for the assembly item itself. This does have the advantage of showing to whom the assembly items have been sold at a glance. However, there are no stock status inquiries for assembly items since they are not stocking items (only the components are held and picked to make up the assembly item at the time of dispatch).
<br><br>
When parts are first set up - the description and stock category needs to be defined and it is at this point that the type of item is defined - from the heading on that screen titled - "Make, Buy, Kit, Assembly or Dummy Part". The choices are "purchased" - the default, "manufactured", "assembly", "kit-set" or "dummy". 
<br><br>
Considering the treatment of assembly items:
<br><br>
If there is stock of an item as shown on the stock status screen - then it is NOT possible to convert the item to an assembly by changing this flag - the stock must first be adjusted back to nil and the corresponding component stock adjusted up. Also, if there are purchase orders for the item - it cannot be converted to an assembly. Remember the assembly part does not exist as a separate part only as an assembly of real stock items for the purposes of selling.
<br><br>
Having set the part to be an assembly, then the part will show an option on the "Select Item" menu to show the costed bill of material. This inquiry shows the current Bill Of Material (BOM) for the assembly together with the cost of each of the components and the total of the costs that is used in the sales analysis and general ledger postings.
<br><br>
Setting up an assembly part requires setting up A Bill Of Material - BOM for the item.
<br><br>
>From the manufacturing tab of the main menu - under the Maintenance section - click the link "Bill Of Material Maintenance". The item search fields show with the option to enter either an extract from the item description or the item code. Having entered the selection click on the "Search Now" button. Not all items will show - only those items that can have a BOM - assembly items, manufactured parts and kit-sets. If the part is not defined as an assembly item - it won't show up! 
<br><br>
Clicking the part code button will then show a screen for entering components to make up the BOM. If a BOM already exists for the item it will show the components already set up. There are two links next to each item shown in the current BOM to enable the line to be edited or deleted.
<br><br>
To enter a new component into the BOM for an assembly, all that is required is to select the component code from the list - the location and work centre are not used for assembly items so the default can be accepted as is. (The location specified in the sales order is used for all the assembly components stock entries.) The quantity required of the component for each assembly item is required to be entered - it defaults to 1 (and maybe 1 in most cases).
<br><br>
The effectivity dates - effective to and effective after (also known and engineering change control dates) are the dates between which the component is used in the assembly. If the BOM is due to change and customers have been advised that a new pan will be used in suites effective from 1 Jan 05 then the new pan could be entered as a component from that date. The existing pan effective to would have to be changed to be effective to 31 December 04. The alternative is to change all the BOMs on the day when the change is made.
<br><br>
Once the component fields have been entered hitting the enter information button adds the component to the BOM there and then. When the BOM is complete just navigate to the main menu of other link to the next task. Be careful not to click enter information button on the default component by mistake - the component must be selected from the list first.
<br><br>
<font size="+1"><b>Controlled</b></font>
<br><br>
This field denotes whether the item is to have lot control on it. Lot control is known by several terms including, batch control, bundle control, roll control. In short it allows a reference for each batch of the item to be entered at the time of delivery, transfer, stock check, invoicing etc. When booking in controlled items the batch references and the quantities in each batch must be entered. Many quality control systems that require traceability of raw materials need this functionality to establish what batch of raw material was used in a given work order. Or what roll of cloth was sold to a given customer. Other industries call their lots of product by different names a melt, a cut, a run etc. Every time a transaction involving a controlled item is created, the system will accumulate the quantity from a separate form for selecting the batches (Lot/roll/melt/work order/serial numbers).
<br><br>
<font size="+1"><b>Serialised</b></font>
<br><br>
Serialised is a special case of controlled where the batch size is always one. The system will prompt for the serial number of each item of stock being received and stock records will be maintained for all serial numbers separately. Serialised does not have any effect if controlled is not set.
<br><br>
<font size="+1"><b>Bar Code</b></font>
<br><br>
This field is the unique identifying bar code for this item, typically containing the EAN bar code for the item. This field is used in identifying the item in EANCOM  edi messages.
<br><br>
<font size="+1"><b>Discount Category</b></font>
<br><br>
Is used in the discount matrix of discount categories and sales types. When an order is for an item with a discount category code and a customer of a sales type that has a discount matrix entry and the order is for a quantity more than the matrix quantity break figure, the system automatically enters the discount into the order lines for all items in that discount category. This allows quantity break discounts across a range of similar products.
<br><br>
The discount category is a 2 character field and there is no error checking on entries.
<br><br>
<font size="+1"><b>Decimal Places</b></font>
<br><br>
Some items of stock require a number of decimal places to be retained and displayed, others do not require any. This field is used throughout the system for invoices, orders and all places where the item quantity is displayed.

<!-- Help End: Stocks -->

<br><br>

<!-- Help Begin: StockCostUpdate -->

<font size="+2"><b>Inventory Costing</b></font>
<br><br>
>From the menu select the inventory tab and Modify Standard Costs. The item code can be entered directly to show the current cost structure, modifications to costs in this screen are reflected in standard cost journals in the general ledger if the link is active in the Company Preferences page - (menu - System Setup tab). Alternatively, to select the stock item to modify the costs for the costing page can be called from the Select Item page - once an item has been selected - a link to the Select Item page is shown on the title bar of all pages. Maintenance and initial entry of cost data is a critical part of the system set up. Simply defining the item header is not sufficient on its own. The cost information entered here is used for both inventory valuation reports and for the general ledger integration stock journals created for the cost of sales, the cost value of stock adjustments, the value of stock received and so on. It can be omitted only if the user is not interested in the value of stock and no general ledger - stock integration is required.
<br><br>
<font size="+1"><b>Material Cost</b></font>
<br><br>
If the item is bought in, this field should be the average or expected cost of the item. If the item is manufactured in house, it should be the cost of externally sourced materials plus the total cost of in house manufactured components, from lower levels in the bill. In future this will link to the Bill Of Materials cost roll up. Alterations to this figure affect the value of all stocks of this item held. The system is a standard costing system. When items are purchased the actual purchase cost is compared to this figure and a variance reported to the general ledger account set up in the stock categories record applicable to the item.
<br><br>
<font size="+1"><b>Labour Cost</b></font>
<br><br>
This field should be the total standard cost of labour included in the cost of this stock item. The labour cost is the labour applicable only to this part not to the manufacture of components at a lower level in the bill of materials. The labour cost of componentry would be included in the material cost. Alterations to this figure affect the stock value of all stock held. See comments for Material Cost. In future, this field will be altered automatically on roll ups of cost.
<br><br>
<font size="+1"><b>Overhead Cost</b></font>
<br><br>
This field should be the total overhead to be recovered on the sale of 1 unit of the stock item. Its value affects the value of all stock held of this item, as for labour cost and material cost above. Labour cost, Material cost and Overhead cost are all added together to get the total cost standard cost of a stock item. This total is the value applied to stock valuations. In future, the cost roll up will automatically update this field based on the work centre overhead rates and the quantity of labour at each work centre.
<br><br>
<font size="+1"><b>Standard Costing Considerations</b></font>
<br><br>
Each time a stock item is sold, the cost of sales account (specified by the COGS GL Postings table by reference to the stock category and sales area of the branch) is updated with the total of material cost, labour cost and overhead cost, and the stock value (the account specified in the stock category record) is decreased by the total standard cost. 
<br><br>
<font size="+1"><b>Actual Cost</b></font>
<br><br>
The actual cost is the last purchased cost as updated by the system on a purchase. For a manufactured item this is the actual cost as calculated including only efficiency variances (price variances are excluded)
<br><br>
<font size="+1"><b>Alterations To Labour Cost, Material Cost or Overhead Cost</b></font>
<br><br>
Since the system only maintains the one standard cost of items, this is the cost that stocks are valued at. In altering this cost all stock held of the stock item under review will be re-valued or devalued accordingly. If stock journals are being created (the option is set in the company preferences from the System Setup tab) then a system generated journal will be created for the effect on stock value using the general ledger accounts set up for the stock category currently defined for the stock item being changed.
<br><br>
Only transactions entered after the charge will be created at the new cost. Sales analysis will refer to the costs as at the time when the transactions are created.
<br><br>
There is a utility available from the Z_index.php page that allows the sales analysis for a specified period to be updated with the current costs. This utility takes the quantity sold and multiplies the current standard cost by the quantity to re-calculate the cost of each sales analysis record in the period selected - the sales analysis data is updated. This will mean that the general ledger costs will then differ to the sales analysis cost for the period since the general ledger postings are created at the time of invoicing/crediting.

<!-- Help End: StockCostUpdate -->

<br><br>

<!-- Help Begin: SelectProduct -->

<font size="+2"><b>Selecting Inventory Items</b></font>
<br><br>
>From all pages in the system the main title bar has links to select from the critical tables in the system. Customers, inventory and suppliers. Clicking on the "Select Item" link takes the user directly to the inventory item selection page. In addition, from the menu, the Inventory tab has a link to "Modify or Delete an Inventory Item Or Maintain Pricing". Using either method, the select item or product page will show.
<br><br>
The search for a particular item can be narrowed by selection of a specific stock Category - a select box allows selection of the category. Also if some element of the code is known this can be entered, alternatively if some element of the description is known this can be entered - the description keywords are used if both a code and description fields are used. Note that the text entered into these fields does not have to be the start of the code or the description. All items with the text anywhere in either the code or the description respectively will be displayed, together with the total stock on hand and the unit of measure for the item. Assembles, kit-sets and dummy parts will all show zero stock on hand. 
<br><br>
The maximum number of resultant items can be defined by a parameter in config.php - this limits the number of records returned so that users over a lower bandwidth connection are not penalised for making too wide a selection. Downloads of significant amounts of data over a slower dial up connection would result in serious degradation in performance. By default this is set at 100 items.
<br><br>
Clicking on the button of the code of the item that is required will select it and links to the options applicable to the item will be displayed. 
<br><br>
Having selected an item it is possible to modify:
<br><br>
<ul>
<li>Item master information
<li>Costs
<li>Pricing
<li>Reorder levels 
<li>Purchasing data
</ul>
It is also possible to inquire on:
<br><br>
<ul>
<li>Inventory Movements
<li>Status - showing quantity on hand, on order with suppliers and on sales orders for customers by location
<li>Historical usage by month
<li>Outstanding sales orders
<li>Outstanding purchase orders
<li>Completed sales orders
<li>Bill of Material
</ul>
Further it is possible to initiate transactions to:
<br><br>
<ul>
<li>Transfer stock between locations
<li>Adjust stock quantities on hand.
</ul>
At the bottom of this page, there is also a link to perform a fresh search for a different item.

<!-- Help End: SelectProduct -->

<br><br>

<!-- Help Begin: Stocks -->

<font size="+2"><b>Amending Inventory Items</b></font>
<br><br>
The master information is available for amendment. The only field that cannot be altered on the main stock item page, is the code. The code is used in many tables throughout the system and modification of the stock code would require data in many other tables of information to make corresponding changes. A special utility is available that allows stock code changes to be made. The changes to the database are extensive and it is recommended that this facility be run out of normal operating hours since the load on the server for the changes could be substantial in a large database. See special utilities. The following points should be considered when altering data fields:
<br><br>
<font size="+1"><b>Changing a Category</b></font>
<br><br> 
The Category of a stock item can be altered at any time. 
<br><br>
However, if the stock journals option is active (in the company preferences set up), it should be remembered that the general ledger coding set up for that category can not be amended retrospectively. In other words, general ledger journals created for invoices, credit notes and stock adjustments created using the old category general ledger codes cannot be altered. The general ledger coding could be amended with a manual journal if necessary.
<br><br>
Note: Sales analysis done by Inventory Category is performed with the stock categories as they were when the invoice/credit was created. Inventory Category information is stored in the sales analysis table and cannot be changed retrospectively.
<br><br>
<font size="+1"><b>Alterations to the Make or Buy Flag</b></font>
<br><br>
A stock item that currently has stock cannot be changed to a Dummy stock item, an Assembly item or a kit set item. The system does not maintain stock quantities for these items and it is therefore inappropriate to have an initial stock quantity. The stock must be either invoiced, credited or adjusted to zero for all locations before this can be changed. Similarly, the system will only allow a Bill of Material to be set up for manufactured, assembly or kit set items. Altering a manufactured item (or assembly or kit set) which currently has a Bill Of Material to a purchased item is also disallowed, the BOM must be deleted first.

<!-- Help End: Stocks -->

<br><br>

<!-- Help Begin: StockCategories -->

<font size="+2"><b>Inventory Categories</b></font>
<br><br>
Inventory Categories are the natural groupings which apply to certain types of stock. A business will normally have several distinct categories. E. g. A manufacturing jeweller might have stock categories for gold chain, silver chain, diamonds, rubies etc.
<br><br>
<font size="+1"><b>Inventory Category Code</b></font>
<br><br>
This is a six character text field which is the reference used internally by the system. The category code must be unique between different categories. It cannot be changed retrospectively and cannot be deleted where stock items are set up to use the category, or sales analysis records exist using the category. The category code is stored against sales analysis records for reporting. All stock items must be defined as belonging to a category and has the appropriate category code stored against it in the StockMaster table.
<br><br>
<font size="+1"><b>Inventory Category Description</b></font>
<br><br>
This description is used in searches for stock items and in sales analysis reports to describe the category of stock referred to. Up to 20 characters of text can be entered, although on some reports less than the full description will appear. 
<br><br>
<font size="+1"><b>Balance Sheet Inventory GL Account</b></font>
<br><br>
This is the general ledger account where system-created standard costing journals will post the balance sheet entry. It is possible to set up a GL account for each stock category or to post all raw material stock categories to a raw material general ledger account and similarly for finished goods stock categories. The select box lists all the available balance sheet accounts - profit and loss accounts will not show. If a new general ledger account needs to be set up this should be done first. This field will not be used if the company preferences flag for "Create GL entries for stock transactions (at standard cost)" is not enabled.
<br><br>
<font size="+1"><b>Inventory Adjustments GL Posting Account</b></font>
<br><br>
This is the general ledger account where the system created standard costing journals will post the profit and loss entry to for stock adjustments. It can be different for any or all stock categories. The select box lists all available profit and loss accounts. This field will not be used if the company preferences flag for "Create GL entries for stock transactions (at standard cost)" is not enabled.
<br><br>
<font size="+1"><b>Purchase Price Variance Account</b></font>
<br><br>
This general ledger account is used by accounts payable invoice entry to post variances between standard cost and the actual cost of stock items of this category. Price variances are calculated when the purchase invoice is entered, unless the purchase order item is on a shipment. Shipment purchase price variances are calculated when the shipment is closed. This field will not be used if the company preferences flag for "Create GL entries for stock transactions (at standard cost)" is not enabled.
<br><br>
<font size="+1"><b>Material Usage Variance Account</b></font>
<br><br>
NOT YET IMPLEMENTED: 
<br><br>
This general ledger account is used by the works orders to post the variances between the actual material issued to a work order and the standard requirements of the work order based on the number of finished items resulting from the work order. This field will not be used if the company preferences flag for "Create GL entries for stock transactions (at standard cost)" is not enabled.
<br><br>
<font size="+1"><b>Type of Resource</b></font>
<br><br>
NOT YET IMPLEMENTED: 
<br><br>
This field declares the type of resource that the stock category represents and is one of Finished Goods, Raw Materials, Labour or Dummy Inventory. This field is used to distinguish labour type stock items from other components for the purposes of calculating work centre overhead in the cost roll up. It is also used for ordering stock reports to ensure raw materials and finished goods are grouped together.

<!-- Help End: StockCategories -->

<br><br>

<!-- Help Begin: Locations -->

<font size="+2"><b>Inventory Location Maintenance</b></font>
<br><br>
A table of locations is maintained which contains a location code of 5 characters and the location description (up to 20 characters). The description is the field used in lookups on invoicing and crediting. To keep the database as compact as possible it is the code which is stored against stock movement transactions. As many locations as required can be set up. When a new location is defined, location records for all items in the database are created. When a location is deleted, so too are all the item location records. However, a location record cannot be deleted if there are stock movements or stock held for any part in the location. Since the location represents the physical location from where goods/services are supplied it is important for determining the tax applicable on a sale. The governing tax authority must specified with the location record. It is used in the calculation of the applicable rate of tax in conjunction with the tax authority of the customer branch being delivered to and the tax level of the item being sold.
<br><br>
Note: Location codes cannot be modified retrospectively. Neither can they be deleted if there are stock movements, users (default location) or customer branch records set up to receive stock from the location.

<!-- Help End: Locations -->

<br><br>

<!-- Help Begin: StockAdjustments -->

<font size="+2"><b>Inventory Adjustments</b></font>
<br><br>
Inventory can be written on or off for individual stock items using this option. Corrections to physical stocks and deliveries of stock can be entered using this option. Adjustments can be entered by selecting the link on the SelectProduct.php page or directly from the menu under transactions. Using the second link, the item code must be known, there is no facility to select an item code from this page. 
<br><br>
If Stock GL integration is enabled from the company preferences page (under the setup tab), then the system creates the necessary journals in the general ledger to update the stock account and the profit and loss account stock adjustment account specified in the stock category record. (see Inventory Categories above and also see General Ledger Integration later)
<br><br>
Note: Inventory Adjustments are not possible with kit set, assembly or dummy stock items since no stock record is maintained for these items.
<br><br>
Inventory adjustments for controlled items must select the batches/serial numbers being adjusted.

<!-- Help End: StockAdjustments -->

<br><br>

<!-- Help Begin: StockTransfers -->

<font size="+2"><b>Inventory Location Transfers</b></font>
<br><br>
Transfers of inventory between locations need to take stock off the sending location and increase the stock in the receiving location. This is effected in one transaction by entering a stock transfer. In the same way as adjustments these can be accessed either from the SelectProduct.php page which is linked to from every page on the top header banner or directly from the menu - inventory tab under the transactions section. All that is required is the location from and to, the date and the quantity being sent. If the business wishes to record inventory in transit an additional in transit location needs to be established and a transfer to the transit location performed when the stock is dispatched and a further location transfer from the transit location to the receiving location when the stock is received. Stock location transfers are shown on stock movement inquiries.
<br><br>
Note: Inventory Location Transfers are not possible with kit set, assembly or dummy stock items since no stock record is maintained for these items.
<br><br>
Bulk inventory transfers consisting of many parts can be set up effective from 2.9. These allow a docket to be produced to be sent with the dispatch of the goods. The transfer is not actually effected until the transfer is received in by the receiving stock location.

<!-- Help End: StockTransfers -->

<br><br>
<font size="+2"><b>Inventory Reports and Inquiries</b></font>
<br><br>
Three types of inquiries are possible:
<br><br>
<ul>
<li>Inventory Status.
<li>Inventory Movements.
<li>Inventory Usage
</ul>
All stock inquiries are performed from the product selection form. Once a product has been selected the links to the various relevant inquiries will show.
<br><br>

<!-- Help Begin: StockStatus -->

<font size="+1"><b>Inventory Status inquiries</b></font>
<br><br>
Shows the detail of how much stock is held and where the stock is (i.e. how much at each location) together with the total quantity of sales orders for the part outstanding and the quantity of the item on outstanding purchase orders can also be viewed from this inquiry. Not only are outstanding sales orders for this part accumulated but all the demand for parent assembly parts as extended by the quantity required per unit of the parent. This ensures that all demand for the part is shown.
<br><br>
This - and all stock inquiries are called from the SelectProduct.php page - this page is linked to from every page in the system from the header links "Select Item". Once an item is selected the relevant inquiry options are displayed. As  with all web pages produced by the system most browsers have good facilities to print them. 
<br><br>
If the item selected is a controlled item then the status inquiry will also show a link to show the batches. If the item is serialised, the link will refer to the serial numbers rather than batches. 

<!-- Help End: StockStatus -->

<br><br>

<!-- Help Begin: StockMovements -->

<font size="+1"><b>Inventory Movement inquiries</b></font>
<br><br>
Inventory movements for the item show with the most recent movements at the top of the screen in descending order of date.
<br><br>
This inquiry shows the movements of the stock item for a specified location with further links to the transaction detail that created the movements such as the invoice or credit note. By default only the last 3 months stock movements show but the date from which stock movements are displayed can be modified from the inquiry page.
<br><br>
Note: Inventory movement inquiries are possible on dummy and assembly stock items. However, since dummy items are not physical stock items, no record of the amount of stock and the location of where held (there is none held) are maintained. The location inquiry will always be zero for a dummy/assembly and kit set items. When a dummy stock item, or an assembly or kit set item is selected the link to the stock status inquiry is not available.
<br><br>
If the stock movement was an invoice or a credit the customer and the price in the currency invoiced or credited will show. 

<!-- Help End: StockMovements -->

<br><br>

<!-- Help Begin: StockUsage -->

<font size="+1"><b>Inventory Usage inquiries</b></font>
<br><br>
This inquiry shows the quantity of the stock item that has been consumed either in sales net of credit notes and adjustments by month from each location. Transfers between locations are ignored as are deliveries. Usage of an item adds all the stock movement quantities for the part so that stock movements related to the sale of assembly items requiring the part under review as a component are included. Usage can be seen by location and also the total usage from all locations.
<br><br>
There is a user modifiable flag which determines how many months of stock usage should be maintained for the item.

<!-- Help End: StockUsage -->

<br><br>

<!-- Help Begin: InventoryValuation -->

<font size="+1"><b>Inventory Valuation Report</b></font>
<br><br>
This report shows the stock on hand at the time the report is run as extended at the current standard cost. Both reports show the total quantity of stock held by Location and by Inventory Category. The detail report lists the individual stock items and value of each. Inventory items with no stock on hand are not printed out. This report can be run with only a selected inventory category and location, to reconcile the stock general ledger accounts.
<br><br>
A separate script is included in the distribution that can be set to run the stock listing report and email it to predetermined email addresses. To take advantage of this facility, the script must be called by wget under a linux distribution from a crontab entry on the last day of each month. The script is called MailInventoryValuation.php. This script will need to be edited with the email address of the user to receive the report and any parameters necessary to run the report. By default it produces a detailed report for stock at all locations. The entry in crontab in a linux installation that would send the report at 0:0 on the first day of each month (assuming wget is installed in /usr/bin/wget and that the web server is on the same machine) would be:
<br><br>
# Scheduled email of monthly Inventory Valuation report
<br><br>
-0 0 1 * * root /usr/bin/wget <a href="http://localhost/web-erp/MailInventoryValuation.php">http://localhost/web-erp/MailInventoryValuation.php</a>
<br><br>
since the page has no output - it would be pointless running it in a web browser although it would initiate another email to the defined recipients.

<!-- Help End: InventoryValuation -->

<br><br>

<!-- Help Begin: InventoryPlanning -->

<font size="+1"><b>Inventory Planning Report</b></font>
<br><br>
This report shows the usage of stock items over the previous four months together with the current stock, outstanding sales orders and outstanding purchase orders. It suggests a re-order quantity based on a number of months times the maximum of the previous four months monthly stock usage (from all stock locations), less the on hand stock and purchase orders. It will not suit all purposes but certainly does provide good information from which to base purchasing decisions.
<br><br>
The Inventory Planning Report is run from the Inventory tab of the main menu under the Inquiries and Reports section.

<!-- Help End: InventoryPlanning -->

<br><br>

<!-- Help Begin: StockCheck -->

<font size="+1"><b>Inventory Checks</b></font>
<br><br>
Scripts are available to automate the stock check adjustments necessary following a stock check. However, this feature does not work with controlled items .... yet. The procedure for there use and for stock checks in general is as follows:
<br><br>
<b>Step 1:</b>
<br><br>
Ensure invoicing is complete for all product dispatched.
<br><br>
<b>Step 2:</b>
<br><br>
>From the main menu - inventory tab, click on the link to print out the stock check sheets.
<br><br>
This page allows selection of the stock location to be checked and a range of stock categories to check. Note there is a new field called:
<br><br>
Action for stock check freeze. 
<br><br>
By default this is set to list the items to be counted. Before a stock starts this must be run selecting " make a new stock check data file". This copies the quantities on hand as at the time the report is run. If the stock check sheets are run for another location and it is set again to make a new stock check data file, then the previous stock check data file is over-written and lost. If there is a stock check in progress in one location and another location wishes to initiate one too, then the second person to run the stock check sheets needs to print them with the Action for Stock Check Freeze field set to Add/update existing stock check file. Similarly if another stock category is to be added to the stock check then - Add/update existing stock check file is the correct option.
<br><br>
<b>Step 3:</b>
<br><br>
Once the stock check data file is created - the stock should be counted.
<br><br>
<b>Step 4:</b>
<br><br>
The counts should be entered - the system will only accept count entries for parts that were included in the categories selected for stock taking in step 2. The system allows many counts for each item and totals all counts to work out the required adjustment. Also, the initial of the counter or reference to the count sheet can be entered to provide a trail of where the stock was that is entered. As soon as there are counts to enter - the counters should pass on the count sheets to the data entry team so that the data entry can be completed as soon as possible after the counting is complete.
<br><br>
<b>Step 5:</b>
<br><br>
Having completed the entry of the counts the Comparison report can be run. 
<br><br>
This is run from the Inventory tab of the main menu:
<br><br>
Compare Counts Vs Stock Check Data
<br><br>
There are number of options for running this report. The default is to run the report without making any adjustments. It should be run in this mode initially so that a review of the proposed adjustments is undertaken. Any adjustments that seem incorrect can now be double checked (i.e. counted again) as necessary.
<br><br>
<b>Step 6:</b>
<br><br>
Once happy that the adjustments to be made are correct the report can be run again with the option to Report and Close the Inventory Comparison File and Process Adjustments as Necessary. 
<br><br>
There is no going back on this process - if you didn't mean to process these adjustments they must all be reversed manually. Be very sure when running the comparison in this mode.

<!-- Help End: StockCheck -->

<br><br><br>
<font size="+3"><b><A NAME=AR>Accounts Receivable</A></b></font>
<br><br>
<font size="+2"><b>Overview</b></font>
<br><br>
A primary function of the system is to track the amounts owed to the business by customers in both local and foreign currency. The system shows, invoice-by-invoice, the balance on the account and does not lose the detail of what makes the account up in a balance brought forward - it is an "open item" system. When payments received from customers are entered and allocated to invoices, the differences on exchange are calculated and posted to the general ledger - that is only if integration to the general ledger is enabled from the company preferences page under the setup tab.
<br><br>
<font size="+2"><b>Features</b></font>
<br><br>
<ul>
<li>Overdues inquiry that takes into account delivery days to the customer's branch and the actual terms applicable to the customer, supported by detailed inquiry of actual invoices overdue. 
<li>Full on-screen inquiry on a customer's account, complete with invoice details and narrative which appeared on the invoice. Inquiries on payments received will show how a payment was allocated to invoices and the difference on exchange attributable to each invoice.
<li>Full integration with stock records and general ledger -a full trail of journals for each transaction is maintained - a drill down to the general ledger transactions for each transaction on a customers account is available from the customer inquiry page.
<li>Open item - full analysis of the outstanding balance is maintained and printed on statements for maximum information to the customer.
<li>Flexible user definable sales analysis reports to pdf or spreadsheet (csv - comma separated values).
<li>Retrospective - de-allocation and re-allocation of receipts or credit notes against charges with re-calculation of differences on exchange and corresponding general ledger journals
<li>Any number of branch - delivery addresses can be added serviced by different sales people with different tax authorities and different areas for sales analysis purposes.
</ul>

<!-- Help Begin: Customers -->

<font size="+2"><b>Entering New Customers</b></font>
<br><br>
>From the menu Receivables tab, click on "Add A New Customer". The customer record is the actual charge account, any number of branches can be defined for each customer account. At least one branch must be defined for each customer. It is the branch details that record the local information about delivery address, tax authority, sales area and sales person.
<br><br>
<font size="+1"><b>Customer Code</b></font>
<br><br>
This field is used as a unique identifier for the customer which is small (maximum of 10 characters of text - letters or numbers). This allows faster searches for customers and keeps the size of the database at a minimum. 
<br><br>
Note: A customer code can be altered retrospectively but because of the large scale of the changes required to the system to update stock movement transactions, sales analysis records and sales orders it could present a significant drain on resources. The option to change a customer code is in the utility menu Z_index.php - which must be entered as a manual URL and is only accessible by the system administrator. Such changes should only be undertaken when there are no other users on the system.
<br><br>
<font size="+1"><b>Customer Name</b></font>
<br><br>
The name of the customer is used extensively in lookups and appears on invoices and statements exactly as typed (searches are independent of case). Proper capitalisation and use of the full name of the customer is recommended. The maximum length of the name is 40 characters.
<br><br>
<font size="+1"><b>Address Line 1, 2, 3 and 4</b></font>
<br><br>
This is the address of where invoices and statements are to be posted. A post office box should be entered if applicable. These fields will allow a maximum of 40 characters and are optional. If left out invoices will not show the customer's address which is a requirement for a valid GST or VAT invoice in some administrations. 
<br><br>
<font size="+1"><b>Currency</b></font>
<br><br>
This is a compulsory field that identifies the currency in which the customer is to be invoiced. All invoices created for the customer will use this currency and the rate will be used as set up in the currency master - accessible from the General Ledger module. The currency rates need to be maintained at least monthly.
<br><br>
Note: that the rate is recorded in the transaction not the currency. If a customer changes the currency in which they are invoiced it is possible to allocate a new currency receipt against invoices (invoiced in the old currency) in which case the system will calculate large differences on exchange. Note: There is no error check on this and care should be taken, should this occur, to ensure invoices are matched off in the currency in which they were originally created - the cross rate between the new and old currency will provide an equivalent amount of the old currency for entry and allocation.
<br><br>
<font size="+1"><b>Invoice Discount</b></font>
<br><br>
Customers can be set up with a general level of discount which applies to all sales. The percentage entered is used by default on all invoices to the customer. The discount rate can be manually overridden at the time of invoicing, which the system will use to calculate discount. The discount percentage used at invoice time will not be stored as the future default unless the customer details are amended. This field checks to ensure that the percentage is less than 100% and greater or equal to zero. 
<br><br>
This feature is not currently used/implemented.
<br><br>
<font size="+1"><b>Prompt Payment Discount</b></font>
<br><br>
Customers can be set up with individual prompt payment discount percentages. This field is for memorandum purposes only and shows on screen when customer receipts are entered. If the receipt is on time the discount can be calculated and input with the receipt.
<br><br>
<font size="+1"><b>Customer Since</b></font>
<br><br>
The default is the current date. This field is only used on certain reports where it can be used to restrict the customers shown, and also for credit reference inquiries. The system will only accept a date in this field. The date can be altered at any time. There is no error checking on this field.
<br><br>
<font size="+1"><b>Payment Terms</b></font>
<br><br>
A select box is provided showing the predefined payment terms. New ones can be created as necessary from the Setup tab of the menu. The terms are used to determine whether an account is overdue or not and a description of the terms prints out on invoices, and statements.
<br><br>
There are no restrictions on altering payment terms for a customer at any time. The next statement or invoice produced will show the new terms. The system will only look at the new terms in deciding whether or not invoices are overdue, no record of the terms is held in the transaction itself. 
<br><br>
<font size="+1"><b>Credit Status or Rating</b></font>
<br><br>
A lookup is available for this field and a button is available for creation of new credit status categories. Credit status's can be defined to stop any new invoices or indeed orders to the customer - irrespective of his/her credit limit.
<br><br>
A customers Credit Status can be altered at any time. 
<br><br>
Note: This will never show on any reports invoices, credits or statement intended for the customers eyes.
<br><br>
<font size="+1"><b>Credit Limit</b></font>
<br><br>
This is a required field which accepts any positive value. It is currently only for memorandum purposes.
<br><br>
<font size="+1"><b>Invoice Addressing</b></font>
<br><br>
This field is a flag that has two choices:
<br><br>
<ul>
<li>To address invoices to the head office postal address. This is the postal address from the customer record as entered above. This is the default option.
<li>To address invoices to the branch postal address. This addresses invoices charged to the customer to the branch of the customer, some customers may wish for the branch to authorise invoices before sending on to head office for payment. The branch postal address entered will be used for printing invoices.
</ul>

<!-- Help End: Customers -->

<!-- Help Begin: CustomerBranches -->

<font size="+2"><b>Entering Customer Branches</b></font>
<br><br>
A customer code entered on its own is insufficient to enter sales orders against. All customers must have at least one branch. The branch records contain the information about the delivery address, the sales area, the tax code, the sales representative and other regional information. New branches can be set up at any time. The first step will always be to select the customer, then to Add/Edit/Delete Customer Branch Records from the Customer menu. There is no limit to the number of branches that can be referenced against a single charge account (customer record). However, branches cannot be transferred between different customers. Only one statement will print per customer, but each invoice will be referenced to the branch it was delivered to.
<br><br>
<font size="+1"><b>Branch Name</b></font>
<br><br> 
The branch name can be up to 40 characters long. The branch name is used on packing slips to identify the name to where delivery should be made. It is also used in lookups in sales order entry as it is to the branch that the sale is ordered against. By selecting the branch from this lookup, the customer code and branch code is returned to the system for storing against the order.
<br><br>
<font size="+1"><b>Branch Code</b></font>
<br><br>
The branch code is stored in transactions. It can be up to 10 characters long and should uniquely identify the branch. Two branches cannot have the same code for the same customer. Branch codes (and other codes) cannot contain spaces, commas, & or - . There are checks in place to ensure no new codes are created containing these characters. However, if data is imported it is important to change any codes which contravene these rules.
<br><br>
Branch codes are not available for modification retrospectively. They exist in many tables throughout the database - sales analysis, orders, DebtorTrans and CustTrans and all data in these tables would need to be modified.
<br><br>
<font size="+1"><b>Branch Contact / Phone / Fax / Address</b></font>
<br><br>
The branch contact is the name of the purchasing manager to whom goods and inquiries would be addressed at the branch. A head office branch could be created to identify contact names for account inquiries. It doesn't matter that such a branch may not be invoiced to.
<br><br>
The address is the physical address of the branch for deliveries. As much detail as is required on labels to get the goods to the desired destination should be entered.
<br><br>
<font size="+1"><b>Sales Person</b></font>
<br><br>
A select box is available to enter the salesperson who services this branch. 
<br><br>
<font size="+1"><b>Draw Stock From</b></font>
<br><br>
Branches local to a particular warehouse can be associated with the local warehouse by setting this field to the preferred stocking location. This affects the entry of sales orders that default to the stock location entered here. It can be overridden at the time of order entry.
<br><br>
<font size="+1"><b>Forward Date From A Day In The Month</b></font>
<br><br>
This field is not currently used.
<br><br>
<font size="+1"><b>Delivery Days</b></font>
<br><br>
This field is not currently used.
<br><br>
<font size="+1"><b>Phone/Fax/Email</b></font>
<br><br>
These are the contact details applicable to the branch.
<br><br>
<font size="+1"><b>Tax Authority</b></font>
<br><br>
The tax authority of the branch determines the regime for tax calculations at invoice and credit time. 
<br><br>
Tax Authorities are the authority that collects the taxes. Different authorities in different countries mainly or different states in the USA. Say sales tax in New York is 10% and sales to customers in Michigan attract sales tax at a different rate payable to a different state tax authority. 
<br><br>
In the UK, Australia and NZ, the Inland Revenue, Australian Tax Office and  the IRD are the relevant tax authorities. Sales to customers that fall under the ATO from a company in NZ do not attract any tax - ie exempt export. However, the same customer who has a branch in Auckland NZ will fall under a different tax authority the NZ IRD - attracting GST @ 12.5% for the same item delivered there. 
<br><br>
So the tax authority is the factor relevant based on where the branch of the customer is who is receiving the supply.
<br><br>
The tax authorities are maintained in a separate table (available from the Setup tab) and the tax rate applicable to invoices and credits and the general ledger posting of tax is determined from the Tax Authority setting of the branch together with the applicable level of tax specified in the item (stock) master. 
<br><br>
A select box allows the appropriate tax authority for the branch to be selected.
<br><br>
<font size="+1"><b>Disable Transactions</b></font>
<br><br>
This flag - either enabled or disabled - either includes the branch as available for new sales orders or not. If it is set to disabled then the branch will not appear on the order entry branch lookup.
<br><br>
<font size="+1"><b>Default Freight Company</b></font>
<br><br>
A select box allows the selection of the freight company that is most cost/service effective for deliveries to this branch. The entry in this field serves as the default for future sales orders. If it is changed at order entry stage, the overridden entry become the new entry for this field.
<br><br>
<font size="+1"><b>Postal Address 1, 2, 3 and 4</b></font>
<br><br>
This is the postal address of the branch. There is no checking done to ensure this is entered. The only place this would be used is if the customer record required that invoices and credits be addressed to the branch.

<!-- Help End: CustomerBranches -->

<br><br>

<!-- Help Begin: Customers -->

<font size="+2"><b>Amending Customer Details</b></font>
<br><br>
The customer details can be modified at any time and any modifications made will be effective for all future transactions. First select the customer from the link provided on all pages, then select the link for Modify Customer Details. 
<br><br>
Points to note:
<br><br>
<ul>
<li>Customer codes can be modified retrospectively using the facility in the utilities menu Z_index.php - this should be used only when all other users are off the system.
<li>Changing the payment terms impacts immediately on the aged analysis since this is recalculated each time it is run or a statement is produced.
<li>Changing the currency of the customer needs care since the exchange rate is recorded against each transaction. Allocations of one currency against another at different rates will produce differences on exchange. The system will not be able to distinguish at the transactions level which was in what currency only the rate against the functional currency.
</ul>
<font size="+2"><b>Salesperson Records</b></font>
<br><br>
Salesperson details can be entered or amended from the setup tab of the main menu.
<br><br>
<font size="+1"><b>Salespeople Code</b></font>
<br><br>
This field can accept any text or numbers up to a maximum of 3 characters - normally the initials of the salesperson or some reference to the area NW1,SW2 would suffice. These salespeople codes are stored against each branch to identify who services them. actual
<br><br>
Note: The salesperson code is not held against individual transactions. This means that if there is any change to a salesperson for an area and you wish to calculate commissions up to the change and after for the new salespeople, the dates of transactions must be used. However, sales analysis records created at the time of invoicing and crediting are created including a copy of the salesperson code applicable at the time of invoicing. Sales analysis reports will thus show who made sales based on the historical representative settings.
<br><br>
<font size="+1"><b>Salesperson Name, Telephone and Fax Numbers</b></font>
<br><br>
The salesperson name is what appears in the look-ups on the customers' branch maintenance page. It is also used for inquiries and reports. By default it shows on invoices and statements, to remind customers where they can contact their local agent for sales inquiries.
<br><br>
The name can be any character to a maximum of 30 characters. The phone number and fax number fields can be a maximum of 20 characters long. 
<br><br>
<font size="+1"><b>Salesperson Commission Rates and Breakpoint</b></font>
<br><br>
The system allows for input of these items as the basis of commission calculations. Most businesses have different ways of calculating commissions. For this reason it is left to the business to write a report which will use these fields (and/or additional ones) to calculate commission according to traditional company policy.
<br><br>
<font size="+2"><b>Sales Types/ Price Lists</b></font>
<br><br>
Sales types are the broad categories which sales fall under, they should not be confused with stock categories. They are arbitrary headings for the different pricing arrangements applicable to each type of customer. For example the fashion house might have sales types for:
<br><br>
<ul>
<li>Indented sales - ordered in advance.
<li>Stock sales - sold from stock.
<li>Made to Measure - sales made up especially for a customer.
</ul>
Inventory categories by contrast refer to the type of garment sold. Each customer is defined as belonging to a specific sales type. A sales type could also be used for groupings of customers. Price lists are held against sales types so all customers defined as belonging to the sales type will be on the same pricing.
<br><br>
Pricing can be set up for each stock item by sales type (and currency), e.g. stock sales would attract a premium for the cost of the increased working capital required or perhaps a discount reflecting the scale of purchasing allowed on volume lines. Sales types for retail, wholesale, trade, special may also be appropriate in other types of business.
<br><br>
New sales types/price lists can be added and existing ones amended from setup tab, "Sales Type Maintenance"
<br><br>
<font size="+1"><b>Sales Type Code</b></font>
<br><br>
This is a 2 character code which is stored against the customer to define the sales type applicable to the customer. It must be unique across all sales types. When entering orders the customer sales type is the key, together with the customer's currency that determines the price list to use.
<br><br>
<font size="+1"><b>Sales Type Description</b></font>
<br><br>
20 characters of text are allowed to describe the sales type. This field is used to describe the sales type / price list applicable to the customer.
<br><br>
<font size="+2"><b>Payment Terms</b></font>
<br><br>
For each customer the payment terms which the business deals with them under must be specified. This provides the information required to monitor whether the account is due or not - ie for Overdue inquiries and reports. Also, the invoices, credit notes and statements, contain reference to these terms so he/she is continually reminded of these terms with every transaction as a matter of course.
<br><br>
Payment terms can take one of two forms:
<br><br>
<ul>
<li>Due after a specified number of days after invoice.
<li>Due on a day in the month following invoice
</ul>
The system allows the definition of a payment terms record either way. 
<br><br>
Note: The overdue report and inquiries use the estimated number of days to deliver in the branch record to determine when the customer received the goods, the payment terms are added to the day when delivery was effected.
<br><br>
<font size="+1"><b>Payment Terms Code</b></font>
<br><br>
This is the code which is used by the system internally to reference the payment terms applicable to a customer. Alterations to this code will cascade through all the customers set up with the code being amended. If there are a lot of customers set up with this code it could take a moment to update all customers.
<br><br>
It is a 2 character text field.
<br><br>
<font size="+1"><b>Payment Terms Description</b></font>
<br><br>
This field (40 characters of text) shows on customers statements, invoices and lookups in the inquiries and selection forms. It should describe as succinctly as possible the payment terms.
<br><br>
<font size="+1"><b>Days Before Due / Day In Following Month When Due</b></font>
<br><br>
Only one of these fields needs to be entered depending on the selection in the bullet options. If the terms are after a number of days, then the field expects the number of days after which the invoice becomes due. Alternatively, the day in the following month when the invoice will fall due (greater than or equal to 0 and less than or equal to 30). These figures are used to calculate whether or not an invoice is overdue for the overdue reports and inquiries.
<br><br>
These fields expect a number - other characters are not accepted.

<!-- Help End: Customers -->

<br><br>

<!-- Help Begin: Shippers -->

<font size="+2"><b>Shippers</b></font>
<br><br>
This table is only used as a reference to the method of transportation that the invoice delivery was effected by. The shippers name is what is used in the look ups and the code is a system maintained counter which is stored in the database to reference the freight company used. The consignment note reference can be stored against the transaction in the reference field. In this way a full proof of delivery trail can be maintained. 
<br><br>
Shipment cost calculations can be automated and the result automatically added to invoices. The least cost shipper is calculated and modified on the order. This system requires active maintenance of the shipment costs tables for each shipper. The shipper costs table shows the cost per kg and metre cubed for freight to destination cities. A substantial amount of data is required. For the system to calculate freight, it also requires that each part have a defined volume and weight set up from which the total order weight and volume is determined for use in the freight calculations.
<br><br>
If freight cost calculations are to be performed at order entry stage, the data must be entered and the options in config.php enabled - see the config.php section.

<!-- Help End: Shippers -->

<br><br>

<!-- Help Begin: CreditStatus -->

<font size="+2"><b>Credit Status Ratings</b></font>
<br><br>
Each customer can be given a credit status that describes the risk as assessed by the credit controller, attached to invoices to the customer. This will never appear on any reports to customers. The customer selection screen allows customers to be restricted by their credit status so it is easy to perform inquiries on all the customers with a similar credit status. In addition the system will not allow invoices to customers whose credit status has a check in the field to prohibit invoicing. This is another credit control tool to the credit limit. 
<br><br>
Credit Status Ratings can be amended and created from the main menu set up tab from the link labelled Credit Status Maintenance.
<br><br>
<font size="+1"><b>Status Code</b></font>
<br><br>
This is any number from 1 to 100. A rating code is required to be held against every customer to identify the credit status of each. The code cannot be changed retrospectively.
<br><br>
<font size="+1"><b>Status Description</b></font>
<br><br>
This field is used in look ups both in the customers amendment/entry and also in the customer selection screen. This is a text field up to 30 characters long.
<br><br>
<font size="+1"><b>Disallow Invoices</b></font>
<br><br>
For all credit ratings set up, this field indicates whether or not the rating is serious enough to prohibit future invoicing to customers set up with this credit rating.

<!-- Help End: CreditStatus -->

<br><br>

<!-- Help Begin: TaxAuthorities -->

<font size="+2"><b>Tax Calculations</b></font>
<br><br>
<font size="+1"><b>Overview</b></font>
<br><br>
Many countries and states have varying methods for the calculation of ad-valorem taxes on sales. There is some flexibility in the configuration of how these automatic calculations are made and to which general ledger accounts the postings are made to. If all else fails tax rates can be entered by line of the invoice or credit as necessary. Different rates of tax can be applied to each line item individually depending on:
<br><br>
<ol>
<li>Where the branch is that is to invoiced.
<li>What the item being invoiced is - e.g. In many states reduced rates of taxes apply to the more essential items for basic sustenance.
<li>From where the item is dispatched i.e. the warehouse  from which the goods are picked. The tax legislation in most countries require that supplies made within the country attract tax - GST/VAT or whatever.
</ol>
<font size="+1"><b>Setting up Taxes</b></font>
<br><br>
<ul>
<li>All the tax authorities under which goods are to be sold must be defined in the tax authorities table under the set up tab. The tax authority record requires the specification of the general ledger account codes where purchase tax is to be posted and where sales taxes are to be posted to, as well as a description as to what the tax authority is called. eg. UK Inland Revenue VAT, ATO -GST(Australia), NZ IRD-GST (New Zealand). If there are several ways in which taxes can be defined within a single authority then it is appropriate to set up another authority. One example might be the Netherlands where as well as charging tax (at 3 different levels) it is possible to dispatch goods to a customer in the Netherlands - from a warehouse in the Netherlands without adding tax to the invoice where the customer has an exemption arrangement and has agreed to pay the VAT on its purchases  themselves directly to the Dutch revenue authority.
<li>Each customer branch is defined as falling under a particular taxing authority. The tax authority is the state body responsible for the collection of taxes. Note that the tax authority is not held against a particular charge account - customer account. It is the branch where the goods are delivered to which is important in determining how the tax calculations work, so it is the branch that is defined as within a particular tax authority.
<li>Each stocking location or warehouse is also defined as within a particular tax authority. This is specified from the locations maintenance form.
<li>Each stock item is defined as being subject to tax at a particular "tax level". The tax level is set in the stock item maintenance screen. In setting the tax level for each item some thought is required as to the taxing of the item under different authorities. Most tax authorities have just two rates of tax applicable i.e. 0% and the normal tax rate eg. 10% for Australia, 12.5% New Zealand. However, in some authorities there may be several tiered rates - the Netherlands has three rates of tax. The levels set for the items must be set based on the requirements of the tax authority (which the business requires goods to be sold within) with the most tax levels. The tax level entered against each stock item is entered against the stock master record. It is simply a number from 0 to 9 and defaults to 1.
<li>The applicable rates of tax then need to be defined. A rate is required for supplies from each Stock Location Tax Authority to each of the defined Tax Authorities and Tax Levels. It is this table of rates that allows the system to determine the rate applicable to each line item invoiced, based on the branch to which the item is to be supplied, the item itself and the location from where the goods are delivered.
</ul>
<b>Sales only within one Tax Authority Example - 2 Tax Levels:</b>
<br><br>
In most tax authorities there are just two rates of tax 0% and some other rate lets say 10%. Sales to export customers will not be taxable as they are exempt. If the business simply operates in the one country, then things are very simple. Items that are zero rated have the stock master record modified to give them a tax level of 2. All other taxable items have the default tax level of 1.  Two Tax Authorities are defined, the first the country in which it operates and the other called Export. Customer branch records must be set with the Tax Authority of the country or Export. The location record of each of the warehouses is defined as being the country tax authority. Now the rates applicable to export tax authority will all be 0 for tax level 1 and tax level 2. The rate of tax applicable to the country tax authority will be 10% for level 1 and 0% for level 2.
<br><br>
<b>Sales only within one Tax Authority Example - 3 Tax Levels:</b>
<br><br>
Maybe zero-rated for food and 5% on clothing and 10% on all other goods. The tax rate of all food items should be set to say 2 and the tax rate of all clothing items set to 3 - all other taxable items at the full rate set to a tax level of 1. The tax rates for the country tax authority for tax level 1 set to 10%, level 2 0% and level 3 5%.
<br><br>
<b>Sales Within Two Tax Authorities Example - 3 Tax Levels:</b>
<br><br>
The business has a warehouse in another country - (Tax Authority A) or state with a different revenue collection authority and one authority has two levels and the other has 3 levels (Tax Authority B) as in the two examples above. Rates need to be defined for deliveries from each warehouse to customer branches in each tax authority. In most cases the rate of tax applicable to exports will be 0% - exempt. Tax Authority A will have entries applicable to deliveries within Tax Authority A for each of the 3 tax levels (even though only 2 are applicable - the rate for level 3 will be the same as 1) and also for deliveries to Tax Authority B. Tax Authority B will have rates set up for each level for deliveries within Tax Authority B and also for deliveries to Tax Authority A - the later rates will most likely be 0%.
<br><br>
The logic used in determining the rate to be used is as follows:
<br><br>
The TaxAuthority of the warehouse the goods are delivered from, the TaxLevel of the item and the Tax Authority of the branch of the customer being delivered to are determined. Using all three of these factors the rate is returned from the TaxAuthLevels table.
<br><br>
General ledger posting relating to the taxes calculated are made in accordance with the codes set up in the Tax Authority table.

<!-- Help End: TaxAuthorities -->

<br><br>

<!-- Help Begin: Prices -->

<font size="+2"><b>Pricing and Discounting</b></font>
<br><br>
<font size="+1"><b>Overview</b></font>
<br><br>
Prices are held by Sales Type and Currency. When setting up a customer account the sales type applicable to the customer is defined as is the currency applicable to invoices to the customer. There is no limit to the number of sales types that can be defined and therefore no limit to the number of different price lists that can be maintained. Further flexibility is available in that where necessary prices specific to a customer can also be defined, normally pricing will be specific to a customer but the system also has the capability of making prices specific to a particular branch of a customer. If a price is flagged as specific to a branch it will not be used for all other sales of the item to the customer, the default price of the item will be used. Further flexibility in discounting is available through the discount matrix (see below). If an item has an additional discount this can be entered at the time of order. The user also has the ability to change the price manually at the time of order. Sales analysis records allow reporting on sales types, so the analysis will report the volume of business done under each set of special pricing arrangements. 
<br><br>
<font size="+1"><b>Maintaining Prices</b></font>
<br><br>
To maintain pricing, first an item must be selected. This can be done from the link "Select an Item " on any page or from the inventory tab of the menu the link "Modify Or Delete An Inventory Item Or Item Pricing" allows for a part to be selected. Once selected the options available to work with the item are shown, there is a link to "Maintain Pricing". The pricing page displays, the sales type and the currency of all prices defined for the item. The existing prices can be deleted or modified from this screen and new prices can be entered. It is not possible to enter two prices for the same sales type and currency.
<br><br>
To enter prices for a specific customer and branch, the customer must first be selected. (See selecting customers). Going to the select an item page after having selected an item now shows an additional link to maintain the special pricing "Special Prices for customer - customer code". Clicking this link shows, the normal price for the sales type and currency of the customer selected and any special prices defined for this item/customer combination. If no special pricing is defined then the page shows only the normal price with a note that no special pricing is defined for this item and allows entry of the new special price. If a special price exists then it can be deleted or changed. A customer with many branches can have a special price for each branch or just a single branch having a special price beyond the special customer price. A special price applicable to only one branch will not apply to any of the other branches. Also, a special price set up for the customer account but with a blank branch field will apply to all branches unless there is a specific price set up for the branch.
<br><br>
Prices can be amended at any time. However, changes to a price do not automatically cascade into sales orders for the item that are yet to be delivered, these would have to be changed manually as necessary.
<br><br>
There is a utility page that has some options for making bulk changes to pricing avoiding extensive re-keying exercises. Great care should be taken with this facility. System administrator permission is required to access this page accordingly.
<br><br>
The script is called: Z_PriceChanges.php and is accessed from the Utilities index Z_index.php
<br><br>
This script allows bulk increase/decreases by percentage for specific or a range of stock categories and for specific sales types. There is the opportunity to update the pricing:
<br><br>
<ul>
<li>For all prices for the sales type within the stock categories selected or
<li>For only the default prices for the sales type within the stock categories selected or
<li>For the selected customer special prices - provided the customer selected belongs to the sales type selected in the bulk change screen.
</ul>
Equally flexible options exist for printing price lists from the main menu under the orders tab under inquiries and reports.
<br><br>
<font size="+1"><b>Discount Matrix</b></font>
<br><br>
The discount matrix allows discounts to be set for quantity breaks across a range of products. Eg a business selling pens may have red, blue, black etc but offer a discount for orders greater than 100 irrespective of colour - even though these are separate items.
<br><br>
Items to have such discounting must be specified in the stock item details screen as belonging to the same Discount Category - this is a 2 character field in the stock master table. In the example above the item codes for blue, red and black pens should all be set to the same 2 character code.
<br><br>
Customers to whom the discount structure should apply are specified by the sales type (the price list) field. The entry in the Discount Matrix table should refer to the sales type and the 2 character DiscountCategory of parts, the quantity above which the discount is to apply and the rate of discount applicable. Several entries in the discount matrix can be made at increasing discounts and volumes, for the same Discount Category and Sales Type.
<br><br>
When an order is entered the system automatically reads the Discount Category of the parts and accumulates the quantities of like Discount Category parts to see if the order lines qualify for the discount. If special discount has been entered exceeding the discount matrix calculated rate - the higher manual entry over-rides the calculation. However, discount manually entered which is below the discount matrix calculation will be uplifted to the discount matrix rate.
<br><br>
To set up the discount matrix there are two elements:
<br><br>
<ol>
<li>The discount categories - need to be defined. Individual stock items can be modified in the stock details form or a special facility is available under the set up tab of the main menu - under the inventory set up section. This screen allows stock codes to be entered and verified before changing to the selected discount category.
<li>The discount matrix itself. This is modified from a link on the set up tab under accounts receivable set up. For each sales type/price list the quantity break and discount applicable must be entered.
</ol>

<!-- Help End: Prices -->

<!-- Help Begin: SelectSalesOrder -->

<font size="+2"><b>Invoicing An Order</b></font>
<br><br>
<font size="+1"><b>Selecting an Order To Invoice</b></font>
<br><br>
All invoices require a sales order to be entered first. 
<br><br>
>From the main menu select the orders tab. Select Outstanding Sales Orders Maintenance. This page shows all the orders outstanding. If the order number is known it can be entered on this screen to select the order to invoice. Hit search orders and the order should show below, together with links to modify the order, print the packing slip and to invoice. Click the link to invoice the order.
<br><br>
<font size="+1"><b>Producing An Invoice From A Selected Order</b></font>
<br><br>
Having selected an order to invoice the order line comes up for confirming the quantities of the order that were dispatched. If the quantity dispatched differs from the order the difference is recorded in the table OrderDeliveryDifferencesLog - and a report is available to show the orders that were not able to be delivered with the first dispatch. There is also opportunity to enter the freight charge and if necessary enter the tax charge - which will normally be calculated automatically based on the tax authority of the customer branch being invoiced. The date of the invoice is defaulted based on the time of day and the settings in config.php. If the hour (in 24 hour format) is after the setting of $DispatchCutOffTime in config.php, then the following day is deemed to be the invoice date, alternatively the invoice date will default to today. Where not all lines on the order are being invoiced there are two choices with how to deal with the balance. 
<br><br>
<ul>
<li>Put the balance on back order
<li>Cancel the line on the order
</ul>
Finally there is also a field for entry of any text on the invoice. Hitting the process invoice button updates the order as instructed and produces all the entries including general ledger postings (if integration is enabled in the company preferences screen - see setup) to record the invoice. Until the process invoice button is hit, no entries have been saved to the database and it is safe to leave the page at any stage without having changed anything - the invoicing process can be cancelled at any time simply by following a link to another page. The processing that takes place once the Process Invoice button is hit includes:
<br><br>
<ul>
<li>Creation of the stock movements for each line item on the order - or for the assemblies components - from the location entered at the time of the order, at the price as per the order. 
<li>Creation of the DebtorTrans record that records the invoice against the customer's account.
<li>Creation of the general ledger jorunals to record the sale and debtor etc.
<li>Updating the order for amounts dispatched, and the invoice number.
<li>Creating/updating the sales analysis records of the items being sold.
<li>Updating the stock quantities for all lines of the invoice and the components of all assemblies included on the order.
</ul>
If the order is not to be invoiced to the customer or branch specified in the order, or pricing is to be changed then the order must be changed. These elements cannot be altered at the time of invoice, they must be altered in the order before it is confirmed for invoicing. Once an invoice is created it cannot be deleted or modified. The order is also updated with the invoice number that it was dispatched on.

<!-- Help End: SelectSalesOrder -->

<br><br>

<!-- Help Begin: SelectCreditItems -->

<font size="+2"><b>Credit Notes</b></font>
<br><br>
Credit notes can be created in one of two ways:
<br><br>
<ul>
<li>From a customer inquiry screen if the user has the necessary permissions ( $PageSecurity=3 - see Security Schema) a link shows to allow an entire invoice to be credited. Having clicked this link there is opportunity to de-select some items from being credited so that only the part of the invoice that needs to be credited can be, with only minimal keying. The same credit note creation page as used in manual creation of credit notes will appear but with all the items from the orignal invoice already entered into the credit note.
<li>Using the link on the main menu under the receivables tab, select the link to create a credit note. 
</ul>
<b>Important Note:</b>
<br><br>
It is important to use credit notes to correct incorrect invoices correctly. Crediting a small price against a part implies that the goods were returned and the customer only credited a fraction of their worth. This is not the correct way to credit an overcharge. By default credit notes return the stock to the location specified, so the stock records will be overstated by the goods returned to stock by the credit note. To correct a pricing error a credit note for the invoice line at the incorrect charge must be done and a new invoice at the correct charge must be made up. This ensures that sales analysis records are not corrupted for the quantities sold and that stock records are maintained correctly. A special pricing adjustment type of credit note is available that does not have any cost implications for the sales analysis and has no stock physical movement record associated with it.
<br><br>
The process for creating a credit note manually is:
<br><br>
<ul>
<li>Select the customer to be credited, there are the usual selection options (a box to enter an extract of the customer's name and a box to enter an extract of the customer's code) 
<li>Select the items to be credited and the prices to be used in crediting the customer - the same quick entry option is available as is used in order entry. - where the part code and quantity to be credited is entered directly. Pricing is automatically determined by reference to the customer's sales type, currency with regard to any special pricing for the customer (and branch) being credited. If the search for a part functions are used, then after each part is selected the quantity can be updated after the item is selected.
<li>Having selected all the items it is possible to edit the items to be credited by clicking the button of the code of the item on the summary, then editing the price and quantity.
<li>Amounts to be credited for freight can be entered directly (this would be entered directly from the original invoice if the credit an invoice option was used from the customer inquiry screen).
<li>The tax amount to credit is calculated automatically by default based on the tax authority of the branch being credited and the total of the line items and freight to be credited. It is also possible to select the manual option. Once having selected manual, the user should hit update to allow free entry of any amount in the tax field.
<li>By default it is assumed that the goods in the credit note are being returned to stock. The location to where the goods are being returned must be selected from the selection box.
<li>If the goods are not being returned to stock, they are to be written off perhaps as samples or showroom display, damaged goods or whatever, the credit note type option should be changed to goods written off. After changing the credit note type and hitting the update button, a new select box will allow a general ledger code to be selected (assuming the general ledger interface to accounts receivable is active - it will not show if there is no integration). The appropriate general ledger code should be selected from this box. The location to return the stock to select box will disappear since it is no longer relevant. A third option is to credit a pricing adjustment - this type does not create any stock movements and the sales analysis updates only affect the value no cost of sales updates take place.
<li>Any text describing the reasons for the credit note should be entered in the narrative box provided.
<li>After completing all the inputs required, hit the Process Credit Note button to create the credit note. The created credit note number will be reported confirming that it has been processed.
</ul>

<!-- Help End: SelectCreditItems -->

<!-- Help Begin: CustomerReceipt -->

<font size="+2"><b>Entry Of Receipts</b></font>
<br><br>
This system tracks the invoices and credits which are outstanding (a so called open item system) in contrast to systems which use a balance brought forward from the previous month to add and subtract current month transactions. Experience has shown balance forward systems whilst intuitive, often result in queries for more information with the inevitable question from customers "what was this balance made up of ?" . The statements produced by this system show a full reconciliation of the amounts outstanding against invoices and credits that are yet to be settled totalling the amount of the customer's account. In order to provide the necessary information to track outstanding amounts, invoice by invoice, the detail of the make up of payments must be entered.
<br><br>
Payments received from customers are therefore entered in a two-stage process:
<br><br>
<ul>
<li>The amount of the payment received is entered in foreign currency together with the exchange rate at which this has been banked into local currency. Any details pertinent to the receipt such as the date, method of payment and any details (which can be recalled from inquiries later) are entered at this stage.
<li>The foreign currency received is allocated to the invoices (and debit journals) on the customer's account. Put another way, the invoices that the payment is meant to be settling are matched off against the payment.
</ul>
If the details of the make up of a payment received are not available at the time of banking, the receipt can still be entered to stage 1. However, the allocation must be done before the statement is produced if the account is to make sense.
<br><br>
Note: Differences on exchange are only calculated once the receipt is matched against the invoices it is paying.
<br><br>
Receipts relating to general ledger transactions can also be entered in the same batch as customer receipts.
<br><br>
The process of entering receipts is initiated from the main menu under the receivables tab - another link is also available from the general ledger tab. 
<br><br>
Firstly, the receipt header information is required, the bank account - one of the previously defined bank accounts (see setup), the date the batch of receipts are banked, the currency and exchange rate of the banking and the type of receipt together with any narrative. The currency can be selected from the defined currencies (see setup). The receipt types can also be selected - they are defined in config.php. Once this information is entered it must be accepted before the receipts in the batch can be entered.
<br><br>
<font size="+1"><b>Receipt - Customer</b></font>
<br><br> 
By default once the a customer has been selected the following information is displayed:
<br><br>
<ul>
<li>The payment terms applicable, so amounts overdue can be easily noted from the allocation screen without having to go back and do an inquiry.
<li>The payment discount percentage applicable. The user can then use this rate if applicable to calculate the discount applicable, depending on how much of the payment relates to "on time" invoices.
<li>The currency that the currency is paying in.
</ul>
<font size="+1"><b>Receipt - Date</b></font>
<br><br>
The date that the receipt was received and banked. If a receipt is being entered retrospectively - or several days bankings are being done together, the default date (i.e. the current date) should be over written with the date the receipt was originally received. This date is used on the statement and the customer may not be able to tie up the receipt if an incorrect date is entered.
<br><br>
Customer account inquiries are shown in date order so the account will not show correctly if the date entered is not the date the money was received. The date is also used in the general ledger transaction created.
<br><br>
<font size="+1"><b>Receipts - Currency and Exchange Rate</b></font>
<br><br>
Selection of the customer automatically tells the system which currency to expect the receipt in. The customer's account is maintained in the currency selected in the customer maintenance screen. 
<br><br>
The correct rate at which the bank has converted the foreign currency to local currency must be input, the system shows the calculation of the local currency banked at the bottom of the screen. The receipt cannot (therefore) be entered until the amount in local currency is known. The exact rate to enter in this field will be the foreign currency figure divided by the local currency figure.
<br><br>
Eg banked 1212 local, in customer's currency this was 400. 
<br><br>
Rate is 400/1212 = 0.330033
<br><br>
The local currency calculated by the system should confirm that the rate entered is correct. The general ledger integration - if enabled - will produce a bank deposit for the local currency amount shown at the bottom of the screen, and reduce (credit) the Debtors Control account by the same amount. The system defaults the exchange rate to that set up against the currency in the currencies table.
<br><br>
When the receipt is matched to invoices, any differences between the local currency amounts banked against the local currency invoiced are recorded against the invoices and written off the general ledger Debtors Control Account and written into the profit and loss account - (specified in the company record of the customer concerned) if the general ledger integration is enabled from the module options screen.
<br><br>
<font size="+1"><b>Receipts - Payment Method</b></font>
<br><br>
The payment method is stored against the receipt and shows on the customer's statement. A banking report can also be run off based on the payment method to summarise the day's bankings, to automate the task of collating the different vouchers and summarising for the bank.
<br><br>
<font size="+1"><b>Receipts - Amount</b></font>
<br><br>
The amount of the receipt in foreign currency is entered here. This cannot be 0. Although, negative receipts are allowed (to reverse incorrect receipts). 
<br><br>
Note: Care should be taken when allocating negative receipts to ensure that only previous allocations are reversed, strange results could occur if allocations are made to invoices not previously allocated to positive receipts - although system integrity will be maintained.
<br><br>
<font size="+1"><b>Receipts - Discount</b></font>
<br><br>
The amount of discount on a receipt can be entered at this point and allocated together with the receipt as one amount. This is useful, where a customer pays an amount net of discount - quite correctly according to his terms and conditions, and the amount naturally will not tie up to invoices on its own without the addition of the discount. The system calculates the gross amount of the payment including discount to set off the customer's account.
<br><br>
<font size="+1"><b>Receipts - Allocating to Invoices</b></font>
<br><br>
Once all the details necessary have been entered for the receipt - the customer, the exchange rate and the amount in foreign currency, the receipt is ready to be allocated to the invoices which is to settle.
<br><br>
This concept can seem strange to businesses that have previously operated customer accounts where they are only interested in the current months' transactions and the balance brought forward from last month. The aim of this system is to remove the question from the customer's lips ... "What is that figure, balance brought forward made up of?". Under the "Balance Forward" system this question can be a tough one to answer, since there is no record of which invoices were paid by which payment. However, this system needs explicit instructions for each receipt on which transactions should be settled as a result.
<br><br>
>From the menu under the Accounts Receivable tab - Click on the link to Allocate Receipts or Credits.
<br><br>
This page shows all outstanding receipts and credits that are yet to be allocated. Clicking on the links against these receipts and credits takes the user to the outstanding transactions on the customers account that are available for allocation. This screen shows all unallocated transactions but only invoices are available to allocate the receipt or credit note to.
<br><br>
Note that allocations of a receipt are not allowed to another receipt. If necessary, negative receipts can be used to reverse allocation against invoices and debit journals (although this is undesirable). Once entered, receipts cannot be deleted - (obviously this would be undesirable from the standpoint of proper internal controls).
<br><br>
If the whole of the receipt is not matched off against (allocated to) invoices and debit journals the system will prompt to ensure that this is what was intended. Unlike many systems, allocations can always be completed or amended later.
<br><br>
<font size="+1"><b>Differences on Exchange</b></font>
<br><br>
The process of allocating receipts to invoices gives the system the information necessary to calculate the difference on exchange since the receipt converted at the rate specified in the receipt screen will equate to a different amount to the local currency equivalent of the invoices it is matched to, unless both the receipt and the invoices it is allocated to are converted at the same rate. 
<br><br>
The difference calculated at the time of allocation can be seen on the receipt screen once the allocations are done and the screen closed and is itemised against the invoices to which it is allocated against. Unlike many systems the difference on exchange can be fully itemised transaction by transaction. Inquiries on the detail of receipts show the difference on exchange that the receipt is responsible for. Further the inquiry on where the receipt was allocated to will show the analysis of where the difference on exchange for the receipt under review came from.
<br><br>
Alterations to the allocations naturally alter the difference on exchange. The general ledger interface produces a journal for only the movement of the difference on exchange for a given receipt each time its allocations are altered.
<br><br>
<font size="+1"><b>Receipts Processing</b></font>
<br><br>
Many customer receipts can be entered at a time and mixed together with receipts for nominal items i.e. receipts from vending machine or sales of fixed assets reimbursement for private use of company assets etc. Once all receipts have been entered the processing can take place. The system only stores the data entered in a server side cookie called a session until such time as the Process button is clicked. 
<br><br>
The processing will give the batch of receipts a number and insert new receipt transactions against customer accounts and update the customer's record with the amount of and the date of the last payment. In addition if the general ledger interface is enabled, the journals to put the receipt into the bank account specified and to decrease the Debtors control account - specified in the company record are created. General Ledger journals are also created for the discount - if any, with the corresponding entry to the Debtors Control account. All the necessary account codes must be set up in the company preferences page under the setup tab and the bank account set up page.
<br><br>
<font size="+1"><b>Deposits Listing</b></font>
<br><br>
After processing has completed a link to print the deposit listing for the batch of receipts just entered is shown. The batch number is also reported. The listing shows the information required by banks in processing a batch of cheques. This deposit listing can be reprinted at any time from a link under the accounts receivable tab - reports and inquiries.

<!-- Help End: CustomerReceipt -->

<br><br>

<!-- Help Begin: CustomerAllocations -->

<font size="+2"><b>Allocate Credits To A Customer's Account</b></font>
<br><br>
This option allows any credit amount - be it a receipt or a credit notes to be allocated to debit amounts - invoices . Receipts or credits that have previously been allocated are available for alteration of their allocations if necessary. There are two ways to perform this function:
<br><br>
<ul>
<li>From the menu select the accounts receivable tab and click the link to "Allocate Credits To Customer's Account". 
<li>From the customer account inquiry - there is a link to allocate any customer receipt or credit where the user has appropriate privileges.
</ul>
Using the first method, by default the screen opens with only the receipts, credit notes and credit journals which have an amount outstanding left to allocate. If there are many receipts which have amounts outstanding and are not fully allocated to invoices and debit journals then this is an indication that there are allocations which need to be done. For the customer's statements to make sense, the allocations must be done. 
<br><br>
Double clicking the receipt to allocate will then open the form that allows the allocations to be made. This screen brings up all the invoices and journals that are outstanding on this customer's account. Invoices that have already been paid off will not show. However, existing allocations made from the selected receipt or credit will show. Clicking a receipt or credit note from the customer inquiry screen brings up this same page.
<br><br>
If a mistake was made with previous allocations these can be rectified by selecting the previous receipt which was wrongly allocated, all the invoices which the receipt was allocated to will show (together with other invoices which are yet to be allocated to). The amounts allocated against them can be amended at will.
<br><br>
Note: This is a complex area behind the scenes, to handle the changes that may result to the difference on exchange. The system calculates the alteration to the exchange difference which results from allocating the receipt to different invoices (or not being allocated at all) and creates the necessary journal in the general ledger - if the integration option is used - to ensure the debtors control account stays in balance with the list of balances. 
<br><br>
<b>It is recommended that help be sought if alterations in the program are required in this area.</b>

<!-- Help End: CustomerAllocations -->

<br><br>

<!-- Help Begin: CustomerInquiry -->

<font size="+2"><b>Customer Inquiries</b></font>
<br><br>
Complete "drill down" inquiries are available to extract the full detail of transactions. The system maintains more data than many systems, preferring to minimise the use of consolidated or batch entries, in favour of the full detail of each transaction. The enquires can show the account history for a customer and from this inquiry it is possible to look at the details behind each transaction, from the detail of the transaction it is possible to look at the line items on the original invoice and which receipts paid the invoice. The original invoice or credit can be viewed directly from customer inquiries and the general ledger transactions that were created by the invoice, credit or receipt may also be inspected.
<br><br>
<font size="+1"><b>Customer Account inquiries</b></font>
<br><br>
>From any page, click the "select customer" link. Having selected the customer all links applicable to the customer show. Among them the customer transactions inquiry.
<br><br>
By default the inquiry screen shows only those transactions after a date six months ago. The default period can be modified by simple editing of the script CustomerInquiry.php. If transactions further back are required only occasionally and not by default - the date after which all transactions will show can be altered at will. When the screen opens the customer's account is shown in the currency of the customer. The aged analysis based on the customer's terms is displayed. 
<br><br>
If the transaction is an invoice or a credit note a magnifying glass icon shows on the same line as the transaction. A click on this magnifying glass then opens a new window showing the detail of the invoice or credit note.
<br><br>
If the integration to the general ledger from accounts receivable - see the option to "Create GL entries for accounts receivable transactions" from the Company Preferences page under setup - then another link with the letters GL will show. This link shows a new page with the detail of the general ledger postings created by this transaction.
<br><br>
If the transaction is a receipt or a credit note and the user has appropriate access privileges, a book icon shows. Clicking this icon takes the user to the page for allocating receipts and credits - if the receipt or credit is already allocated then the detail of how the receipt/credit was allocated is shown together with other invoices that could be used for allocating against. Invoices that have previously been allocated will not show.
<br><br>
More (or less) history can be shown by changing the "Show all transactions after:
<br><br>
" date - then clicking the refresh button. The balance on the customer's account should balance to the sum of the amounts outstanding. The amount outstanding is used to represent:
<br><br>
<ul>
<li>For Invoices, the amount which has not yet been settled by receipts or credit notes
<li>For Receipts, the amount which has yet to be allocated (or matched off) against invoices.
</ul>
<font size="+1"><b>Transaction Detail inquiries</b></font>
<br><br>
The detail of transactions can be inspected via one of two avenues:
<br><br>
<ul>
<li>From the Customer's Account inquiry - click on the magnifying glass or the GL link against the transaction required.
<li>From the Transaction Enquires - from the Accounts Receivable tab, click on the magnifying glass to see the actual invoice or credit note.
</ul> 

<!-- Help End: CustomerInquiry -->

<font size="+2"><b>Customers - Reporting</b></font>
<br><br>
The system is designed for flexibility and to provide the framework of core functionality required to administer a debtors ledger system. The basic accounts receivable reports are available as standard since they are used by all businesses. However, since the database is open it is envisaged that the business will make use of ODBC drivers for database used and use Crystal Reports or Microsoft Access  or some other analysis software, where the user is on the same LAN as the server for specialised reports.
<br><br> 

<!-- Help Begin: AgedDebtors -->

<font size="+1"><b>Aged Customer Balance Listing</b></font>
<br><br>
>From the main menu select Customers, Reports, "Aged Customer Balances/Overdues Report".
<br><br>
This report calculates the balances of the customers' accounts according to the parameters specified in config.php $PastDueDays1 and $PastDueDays2. The report is generated in the currency of the customer. The currency of the report must first be selected and the range of customers accounts to print.
<br><br>
The report can be printed at two levels:
<br><br>
<ul>
<li>The full detail of the all outstanding amounts on the account, transaction by transaction analysed into current, Due, $PastDueDays1 and PastDueDays2. The detailed report also shows the terms applicable to each customer.
<li>A summary of the account balances split in the same aged groupings.
</ul>
This report recalculates the balance on the customer's account from the outstanding transactions and analyses each outstanding transaction based on the date of invoice plus the expected time to deliver to the branch invoiced.
<br><br>
The Aged Customer Balances can also be restricted to show just the accounts where there is some balance overdue. The same detail and summary reports are available. The resultant reports create pdf files that can be either saved or printed.

<!-- Help End: AgedDebtors -->

<br><br>

<!-- Help Begin: PrintCustStatements -->

<font size="+1"><b>Customer Statements</b></font>
<br><br>
The customer statement shows the outstanding transactions on the account. There is an option in config.php that allows transactions that have been settled at some time within the last month to be shown in a settled transactions section of the statement. The parameter, $Show_Settled_LastMonth should be set equal to 1 for this. If it is set to 0, then any settled transactions will not be shown on the statements. This saves printing zero balance statements and there is argument both ways as to which is best.
<br><br>
When transactions are created, the date of the transaction determines the period into which it is posted in the general ledger. The date of the transaction is also used in the aging calculations used on the statement. All transactions to the date of the statement are included. It is not possible to print a statement as at some prior date. It may be necessary to delay the start of invoicing for the new month until all receipts are entered and allocated and the statements printed before processing new invoices that should appear on the following month's statement.
<br><br>
Procedure - All receipts must be allocated for the aged analysis to be calculated correctly. Then from the main menu Accounts Receivable tab select from the reports and inquiries section, "Print Statements". The link will allow selection of a range of customers. A single customer's statement can be printed by selecting the same starting an finishing customer code. Statements will be printed in sequence of the Customer code set up in the customer details screen. A pdf file is created this can be saved or printed.

<!-- Help End: PrintCustStatements -->

<br><br>

<!-- Help Begin: CustomerTransInquiry -->

<font size="+1"><b>Customer Transaction Listing Options</b></font>
<br><br>
This is accessed from the main menu, accounts receivable tab under the link "Transaction Inquiries".
<br><br>
This inquiry allows transactions to be listed based on the selection of criteria on screen. The page allows listing of receipts, invoices or credit notes within any specified date range.
<br><br>
This listing is shown on the screen and can of course be printed from the browser if necessary.

<!-- Help End: CustomerTransInquiry -->

<br><br>

<!-- Help Begin: SalesAnalRepts -->

<font size="+1"><b>Sales Analysis</b></font>
<br><br>
>From the main menu under Accounts Receivable Reports and Inquiries options, "Sales Analysis Reports". A list of all previously defined sales reports shows with links to:
<br><br>
<ul>
<li>Modify the design of the report - the header
<li>Modify the columns of the report
<li>Run the report and create a PDF file
<li>Run the report to create CSV - comma seperated values report that can be read by any spreadsheet application.
</ul>
Also from the bottom of this page it is possible to make up new reports to show most combinations of sales data. A seperate table of sales data is maintained by the system to enable these reports to be run as quickly as possible. 
<br><br>
A sales analysis report is made up of:
<br><br>
<ul>
<li>the report header defintion and
<li>the report column definitions
</ul>
<b>Sales Analysis Report Headers</b>
<br><br>
The first step in creating a report is to enter the report header information. This includes:
<br><br>
<ul>
<li>Report Heading - any combination of characters to describe the report.
<li>Up to 4 levels of grouping and the criteria for each grouping.
</ul>
Each grouping consists of a selection of one of:
<br><br>
<ul>
<li>Sales Area 
<li>Product Code
<li>Customer code - the actual charge account
<li>Sales type (or price list)
<li>Product type (or stock/inventory category)
<li>Customer branch
<li>Sales person
</ul>
The report groups on each level in sequence eg. A report with Group By 1 set to Product Code and Group By 2 set to Sales Area, would show the product code, then the areas underneath the product code where the item has been sold. Most often the more logical sequence might be to show the sales area as Group By 1 and the Product Code under the Group By 2 so that the sales of the product codes for each area appear together.
<br><br>
Each Group By section requires a range to be specified. All criteria specified must refer to the coding as specified in the setup section of the relevant Grouping. Eg Sales Areas criteria must be entered as the area code - not the area description. The criteria from should be less than the criteria to otherwise the report will have no output. 
<br><br>
<b>Sales Analysis Report Columns</b>
<br><br>
Having created a header for the report the columns can then be defined. Columns for existing reports can be modified at any time. From the main Sales Analysis Reports page - (Accounts Revceivable tab - Sales Analysis Reports) - there is a link on each report to "Define Columns". From this link the columns for the report selected are shown, together with a form to allow input of new columns. The following input is required for each column defined:
<br><br>
<ul>
<li>A column number between 1 and 10. This number determines where abouts across the page the column is printed -1 is the closest to the left of the page and 10 is the closest to the right of the page.
<li>Two fields are available for line 1 and 2 of the column heading. Any text can be input to a maximum of 15 characters in each.
<li>Whether the column is a calculation or not. The input required for calculated columns is different from normal data columns.
<li>For normal data columns -a range of periods to show the data for is required. The period from and to must be specified as the period number. Since periods are maintained almost invisibly by the system, there is a link provided from this screen to show the periods defined. If a single month is required then the period from will be the same as the period to.
<li>The data to show in the column can then be selected from: Quantity, Gross Value, Net Value (after discounts), Gross Profit, Cost and Discount.
<li>Budgeted sales or actual sales.
</ul>
If the column is defined as being a calculation the range of periods are not required, neither is the selection of the type of data to show and the budget or actual. Changing the Calculation field to yes then hitting the enter information button, show the fields required for a calculation:
<br><br>
<ul>
<li>Numerator field - this the column number of the first parameter to the calculation- the numerator field is always required in a calculation.
<li>Denominator field - this is the column number of the second parameter to the calculation if the calculation is to performed on two columns. If the operator of the calculation is to divide - then this column total will be on the bottom of the division calculation. If the calculation is to be done using a constant then this field can be left blank.
<li>Calculation operator can be one of:
<ol>
<li>Numerator column divided by Denominator column
<li>Numerator column divided by the constant
<li>Numerator column multiplied by the constant
<li>Numerator column plus the denominator column
<li>Numerator column minus the denominator column
</ol>
<li>Constant can be any number for use in the calculations
<li>Format type allows the output of the calculation to be expressed as either a percentage or a number.
</ul>
Hitting the Enter Information button adds the column to the report definition. It should then show in the list of defined columns and a blank form for entering a new column definition. If a column is no longer required the list of column definitions shown has a link that allows it to be deleted. 
<br><br>
The column number itself is a link to modify the definition of the column. The definition shows in the input form for alternation as necessary.
<br><br>
Clicking the link to maintain report headers shows the list of defined reports for modification or running. To run the report simply click on the Make PDF Report link.
<br><br>
These sales analysis reports have to look at a lot of information (and the reports are generated dynamically) as a result, they can take a minute or so to run on large databases. However, the design of the data has been done very carefully to ensure that reports generate dramatically faster than many such analysis engines.
<br><br>
<b>Automating Sales Reports</b>
<br><br>
Having created reports it is possible to email sales reports to defined recipients. A script called MailSalesReport.php is a template for doing this. There are no links to this script and no security level is set up for it. All that is required is to save this script to another file named anything with an extension of .php under the same directory as the other scripts. 
<br><br>
This script will need to be edited with the email addresses of the people to receive the report and the reportID - the system generated report number to be run. The lines to edit are:
<br><br>
/*The Sales report to send */
<br>
$ReportID = 4;
<br><br>
/*The people to receive the emailed report */
<br>
$Recipients = array('"Root" <root@localhost>','"some one else" <someoneelese@sowhere.com>');
<br><br>
The lines surrounded by /* and */ are comments.
<br><br>
Once edited to the ReportID or choice and the Recipients all entered the file should be saved.
<br><br>
To schedule the report to run an entry in crontab under a linux installation that would send the report at 0:0 each week day (assuming wget is installed in /usr/bin/wget and that the web server is on the same machine and the new script is called DailySalesReport.php) would be:
<br>
# Scheduled email of a daily sales report
<br><br>
0 0 * * 2-5 root /usr/bin/wget http://localhost/web-erp/DailySalesReport.php
<br><br>
since the page has no output - it would be pointless running it in a web browser although it would initiate another email to the defined recipients.
<br><br>
A similar template script is available called MailSalesReport_csv.php that mails the comma separated values file for a ReportID to the Recipients defined in the script in just the same way as MailSalesReport.php script above.

<!-- Help End: SalesAnalRepts -->

<br><br>

<!-- Help Begin: PrintCustTrans -->

<font size="+1"><b>Printing Invoices Or Credit Notes</b></font>
<br><br>
>From the Main Menu select the Accounts Receivable tab, under Inquiries and Reports, "Print Invoices or Credit Notes".
<br><br>
This page shows the last invoice and credit note created and some brief instructions on how to use the page. By default the page assumes that invoices are required. However, if credit notes are required, they can be selected from the list field. 
<br><br>
If only one transaction is required then the number of the transaction should be entered in the field "Start invoice/credit note number to print". If a range of transactions is required then both fields are necessary to be completed.
<br><br>
There is also an option to print EDI invoices/credit notes. By default these are not printed as they will normally be dispatched electronically to the customer. However, some businesses and tax authorities require hard copy invoices and credit notes to be produced in any event.
<br><br>
Two options are available - Print, produces a html page of the invoice (or credit note), the resulting page can then be printed using the browser print functionality. The print PDF produces a PDF invoice (or credit note).

<!-- Help End: PrintCustTrans -->

<br><br><br>
<font size="+3"><b><A NAME=Orders>Sales Orders</A></b></font>
<br><br>
<font size="+2"><b>Functionality</b></font>
<br><br>
<ul>
<li>Customer orders can be entered and maintained and referenced back to the customer's order number. 
<li>The cumulative quantity on order for a stock item shows as a demand in stock status inquiries. 
<li>The cumulative quantity on order for assembly items shows the demand against its components in the stock status inquiries.
<li>The quantity of the order left to invoice is maintained and updated for invoices and credit notes raised against the order. 
<li>The orders entered can be invoiced directly with little or no additional input. 
<li>Multiple dispatches are possible from a single order. Order retains references to each dispatch.
<li>Differences from the order are logged when dispatches are not the same as the ordered quantities for reporting delivery in full on time.
<li>Pricing automatically returned based on the customer sales type, branch and currency.
<li>Quantity break discounts across a range of products are automatically calculated based on the discount matrix.
<li>Packing slips printable on laser or pre-printed stationery.
<li>User selectable inventory location to pick from.
<li>Free form entry of delivery addresses - defaulting to the customer branch physical address.
</ul>

<!-- Help Begin: SelectOrderItems -->

<font size="+2"><b>Entry of Sales Orders</b></font>
<br><br>
>From the main menu, Orders tab, click the Order Entry link.
<font size="+1"><b>Selection of the Customer and Branch</b></font>
<br><br>
Initially, the order entry page shows the options to allow selection of a customer and branch. The customer is the actual charge account to where the order should be billed and the branch contains all the information about delivery. The customer search facilities are similar to the select customer script, but the code actually looks up on the branch code of the customer, only branches are displayed with accompanying customer charge to information. Searching for a customer can be either by entering a letter or letters in the branch code or by entering some keywords (or section of) in the customer name. Searching in this way minimises the result set returned (possibly over a dial up connection) to ensure the response is as speedy as possible to the users browser. All branches matching the criteria entered and not flagged as disabled for transactions, are returned each one with a button on the customer code. Hitting the button for the desired customer/branch selects it as the customer and branch to deliver the order to. There is opportunity later to modify the delivery details if need be. The order now shows the quick entry screen headed up with the name of the customer and branch, together with the sales type of the customer.
<br><br>
<font size="+1"><b>Selection of Order Line Items</b></font>
<br><br>
There are two ways to select the line items for the order. 
<br><br>
<ul>
<li>By default a "quick entry" screen shows allowing the direct entry of the inventory code and the quantity required for the order. The number of lines shown on this quick entry table is defined by a variable in config.php - $QuickEntryLines which is user modifiable. After the user has entered any number of lines into this table, hitting the Quick Entry button processes the items entered into the order. The prices are retrieved based on the sales type, the currency, customer branch and the charge to customer of the order. If there were insufficient lines to enter all part codes for the order, the same process can be repeated with the quick entry table shown below the order summary after the first quick entry has been processed.
<li>On the quick entry screen there is a button to search parts. This button enables the user to search for a part based on the stock category and/or any part of the item's description and/or any element of the item's code. Hitting the search button after making appropriate entries in the code or description fields shows the part codes and descriptions together with picture of the item - if one has been uploaded to the server for all parts. Part pictures must be in .jpg format with a file name identical to the part code but with the extension .jpg, and it must reside in the directory specified in config.php for part_pics. The item code is displayed as a button and the system automatically puts one of the item selected onto the order. Additional parts can be selected in the same way.
</ul>
Having selected the parts for the order, it is possible to edit the quantities, price and discount applicable to each line of the order. To get the order values to re-calculate the "Recalulate" button must be clicked (this is the compromise of using server side scripting - PHP - to the exclusion of any client side - java - processing). Discounts will be calculated using the Discount Matrix functionality described under that section within the order based on the quantities that are entered. 
<br><br>
If a line entered, displays against a red background this means that the system inventory is showing insufficient stock to cover the order line, from the inventory location as defaulted from the customer branch record - as the most appropriate inventory location to draw the stock for this branch's orders. The item code displayed is also a link to a new browser window showing the stock status inquiry for the item, this shows the stock available at all locations.
<br><br>
A line can be deleted at any time by clicking on the link at the end of the line to delete it.
<br><br>
The whole order can be cancelled at any time by clicking on the "Cancel Whole Order" button.
<br><br>
The customer can also be changed at any time.
<br><br>
Once all the line items have been selected the Delivery Details button must be clicked. Note that there have been no changes to the database at all. The data entered exists only as a server side cookie - a file on the web-server. Delivery details must be confirmed before the order can be placed.
<font size="+1"><b>Delivery Details</b></font>
<br><br>
By default the delivery details are obtained from the physical address of the branch. However, any of the information in this screen can be over-ridden. This information prints on the dispatch/packing slip and on the invoice. 
<br><br>
The inventory location where the stock for the order is to be drawn from is defaulted from the customer branch record. However, it is possible to select an alternative inventory location if the order is to be picked from elsewhere.
<br><br>
The customer's order reference should be entered here and the most appropriate freight company should be selected. The system keeps track of the last freight company used to deliver to the branch and uses this as the default, if it is over-ridden then this new value is stored against the branch.
<br><br>
It is possible to go back to the line item entry screen retaining all the data entered on the delivery details screen by clicking on the modify line items button. If the inventory location to draw from has been changed the colouring of the background of the line items will be updated to reflect the stock available at the new location to pick from.
<br><br>
If the automatic freight calculations are being used - see the parameters in config.php, the freight cost will be calculated based on the sum of the whole order cubic metres and weight. The best shipping company will also be returned. The user can choose to charge the freight calculated or just use the cheapest freight company. The freight charge calculated can be over-ridden if required.
<br><br>
Once all details are entered correctly the Place Order button should be clicked. It is important to note that abandoning the order before this button is clicked there have been no updates to the database and nothing is saved. Clicking into some other screen loses the order as entered. Whilst it is perfectly acceptable to have several browser screens open looking at different inquiries at the same time. It is not possible to have two windows entering two separate sales orders at the same time, entries in the one window will over-write the other.

<!-- Help End: SelectOrderItems -->

<br><br>

<!-- Help Begin: SelectSalesOrder -->

<font size="+1"><b>Modfiying An Order</b></font>
<br><br>
Only Outstanding sales orders can be modified. Only these orders have any balance of a quantity remaining to be delivered and/or invoiced. Order lines that have been invoiced completely will not be available for modification. New items cannot be added to the order. Pricing cannot be altered if any amount of the line has already been delivered/invoiced. Quantities of an order line cannot be reduced below the quantity of the line already invoiced.
<br><br>
Note that changing the delivery address of an outstanding order that has already had some of the order delivered and invoiced will affect re-prints of the initial invoice - it will show as being delivered to the order delivery address that has been modified. Hard copy of original invoices are required.
<br><br>
<b>Selecting an Outstanding Sales Order</b>
<br><br> 
There are several ways:
<br><br>
<ul>
<li>If the item ordered is known, sales orders can be selected that have the item on by first selecting the item in the Select Item page, once the item is selected a link to show outstanding sales orders is displayed.
<li>If the customer is known, then first select this customer then use the link on the customer selection menu to show only the outstanding orders for the customer selected.
<li>All outstanding orders can be displayed by entering the Outstanding Sales Orders screen without a customer or item directly from the main menu under the orders tab. The outstanding Sales Orders screen also has facilities for looking up a part directly as well.
</ul>
The Outstanding sales orders are shown by inventory location, the inventory location desired can be selected on this screen, by default the location defined as the default for the user is shown. The orders matching the criteria are only shown when the user clicks on the search orders button.
<br><br>
The orders displayed each show links to modify the line items, invoice the order or print the dispatch note. If the order has already been printed this link will show that it has already been printed to avoid printing several dispatch notes and risk doubling up deliveries.

<!-- Help End: SelectSalesOrder -->

<br><br>

<!-- Help Begin: Shipments -->

<font size="+2"><b>Shipments</b></font>
<br><br>
The shipment costing system is meant for use in situations where there are substantial freight costs on purchased products and the business wishes to keep track of the actual cost of these items. Many smaller businesses do these calculations on spreadsheets outside the integrated system. The advantage of bringing them inside the system is that the possibility for updating standards and calculation of variances from standard at the time the costing is completed.
<br><br>
Having selected a supplier the system allows outstanding purchase order items to be collated into a shipment of goods arriving altogether, the shipment is allocated a shipment number. By changing the expected time of arrival of the shipment (ETA) the delivery date of all purchase order lines on the shipment will be updated. The costs associated with landing and clearing this bundle of products can be entered against it from purchase invoice entry. Freight charges and cartage from the wharf, airfreight, unpacking, demurrage etc can be entered as costs of the shipment. The shipment costing inquiry will show these costs allocated against all of the items on the shipment, using the invoiced value of the items as the basis for apportionment. The actual shipment cost will show together with the existing standard cost and the variance.
<br><br>
<font size="+1"><b>Shipment General Ledger Posting</b></font>
<br><br>
Shipment charges are posted to the GRN suspense account at the time of entry of the purchase invoice. When the shipment is closed the costs of the shipment are compared against the standard cost of the shipment items taken into stock and the difference that was left in the GRN suspense account is taken to purchase variances.
<br><br>
If the option to update standard costs at the time of closing the shipment is used, the difference on the stock value is taken to the stock category - stock adjustment, general ledger account.
<br><br>
<font size="+1"><b>Creating Shipments</b></font>
<br><br>
After selecting the supplier from which the product has been sourced and having entered the purchase order(s) to initiate the transaction, from the select supplier menu, choose the link "Set up a New Shipment". Each time this page is called the system increments a shipment reference and shows the shipment number that will be used. The shipment page that shows allows, the details of the shipment to be entered.
<br><br>
<ul>
<li>The name of the vessel on which the product has been loaded
<li>The voyage reference - this could refer to the HAWB in the case of airfreight
</ul>
The above are not required if deemed unnecessary, but serve as a useful reference for following and tracking where product is currently and monitoring ETA through the shipping company who will need these details.
<br><br>
In addition to the above details the Expected Time of Arrival (ETA) is required to be entered.
<br><br>
It is important to hit the "Update Shipment Details" button after this data is entered. As clicking one of the add links will lose this information just entered otherwise.
<br><br>
When the shipment entry screen is first displayed there is facility to select the inventory location where the purchase order has been requested to arrive. By default the user's default inventory location will be used, but once the inputs above are entered the location can be changed and a click on the "Update" button will then show all the purchase order items defined to arrive at the new location.
<br><br>
Once a purchase order item has been selected to be part of the shipment the shipment entry screen will only allow other purchase order items that are also to be delivered to the same location. The location will be displayed on screen for informational purposes only.
<br><br>
The location into which the shipment is to be delivered follows the purchase order. It is not possible to set up a shipment with purchase order lines into different locations.
<br><br>
(NB. it is possible to change the location of a purchase order that has lines on it that are allocated to a shipment that also has other lines expected to be delivered into a different location. This could result in a problem)
<br><br>
The purchase order line items on outstanding orders that are yet to be invoiced and are not currently on a shipment are shown on the screen. Clicking on the link to "Add" will add the line to the shipment. The lines currently allocated to the shipment will show and a link to "Delete" the line. This allows the line to be taken off the shipment (it will not delete the purchase order line).

<!-- Help End: Shipments -->

<br><br>

<!-- Help Begin: Shipt_Select -->

<font size="+1"><b>Shipment Costings</b></font>
<br><br>
The costs of a shipment are recorded at the time of purchase invoice entry. Entering a purchase order from the supplier of the shipment, records the actual amount invoiced and the exchange rate at which it was invoiced against the shipment. It is important to ensure the shipment is defined before any of the item is invoiced. Once some of the item is invoiced it is not available for adding to a shipment. Nor can the item be taken off a shipment to which it was already set up against. The item must be credited before this can be done. The recording of the shipment cost happens invisibly behind the scenes for GRN items.
<br><br>
Freight charges, duty and cartage are recorded against the shipment at the time of the purchase invoice entry against the freight company. There is opportunity to enter invoices against a shipment and all open shipments show in a select box.
<br><br>
Selecting a shipment is done from the select supplier screen. The shipments defined for the supplier are shown for the users's default inventory location. The location can be changed to show shipments into other locations. By default only open shipments are shown but there is an option to show closed shipments as well. The vessel, voyage and ETA show for all shipments shown together with links to allow:
<br><br>
<ul>
<li>Modification of the shipment lines or ETA or references.
<li>Viewing the costing with invoiced amounts in local currency against each item together with the other general shipment charges - shown by supplier and invoice number.
<li>Closing the shipment costing.
</ul>

<!-- Help End: Shipt_Select -->

<!-- Help Begin: ShipmentCosting -->

<font size="+1"><b>Closing a Shipment</b></font>
<br><br>
>From the select Shipment screen, the link to close a shipment shows on all open shipments. Closing the shipment makes it impossible to post additional charges against it and also if general ledger stock integration is active, journals to take the variances from standard to the variance account and the GRN suspense are created. Closing a shipment also has an option to update the standard costs. By default this is set to yes. Again if stock GL integration is enabled (see company preferences) then the cost adjustment journals are posted in the same way as if the cost adjustment was processed separately.

<!-- Help End: ShipmentCosting -->

<br><br><br>
<font size="+3"><b><A NAME=GL>General Ledger</A></b></font>
<br><br>
<font size="+2"><b>Overview</b></font>
<br><br>
The general ledger is the accounting hub that is central to the "sub" ledgers for creditors (Accounts Payable), debtors (Accounts Receivable) and stock (inventory). All entries in the sub ledgers are also represented by entries in the general ledger. It is the integration set-up that determines how entries in the sub-ledgers are reflected in the general ledger. Most activity in the general ledger will be automatically created from the activity in the sub-ledgers with receivables, payables and stock administration.
<br><br>
However, there are also facilities to:
<br><br>
<ul>
<li>Enter general ledger receipts against a pre-defined bank accounts.
<li>Enter general ledger payments against pre-defined bank accounts.
<li>Enter general ledger journals between any general ledger accounts - except bank accounts. These can also be made to reverse automatically in the following period. Further journals can be posted to any period future or previously - the period is determined by reference to the date entered.
<li>Inquire on general ledger account activity and from any entry in this inquiry drill down to the journals created to produce the entry.
<li>Inquire on the general ledger trial balance for any period end in history or currently.
</ul>

<!-- Help Begin: AccountGroups -->

<font size="+2"><b>Account Groups</b></font>
<br><br>
The account group is the parent object of a general ledger account for someone who understands OO programming. Child accounts created inherit the properties of the account group - ie the account will be a profit and loss account if it belongs to an account group that is a balance sheet account, the child accounts will display in the trial balance (TB) together in the sequence determined by the account groups sequence in the trial balance (TB).
<br><br>
Using a numbering system inhibits the ability to manipulate the format of the trial balance ie you have to be able to change the account code to change where an account appears ie
<br><br>
10100 motor expense Copenhagen
<br><br>
10110 motor expenses The Hague
<br><br>
10120 motor expense Amsterdam
<br><br>
would be great but then if we wish to restructure so that Copenhagen expenses are all shown together and The Hague is now all shown together etc we will have to change the numbering. In web-erp all that is required is to change the account group. In the first situation we could have an account group for motor expenses and all these account numbers would be set up as belonging to the account group. We can decide whereabouts the account group should appear in the trial balance by changing the sequence in trial balance field. All accounts in the account group will show together. If we decided to change the trial balance to show The Hague expenses together as a separate group of costs, we could create an account group for the The Hague selling costs - or whatever, and change the motor expenses the Hague account no 10110 to be a member of that account group.
<br><br>
Account groups require the sequence in the trial balance to be specified and also whether the accounts in that group will be profit and loss accounts or balance sheet accounts.
<br><br>
A balance sheet account is one where only the balance at the end of the period concerned is of interest. A profit and loss is one where we are interested in the movement over the period. eg. Motor expenses we are not concerned with the balance at the end of the month so much as how much was spent over the period of the profit and loss. However, for a bank account we wish to know what we have now as a balance not the movements in the account. As noted accounts created as a member of an account group will inherit the properties of the account group ie if the account group is a balance sheet group then the accounts will be interpreted as balance sheet accounts.

<!-- Help End: AccountGroups -->

<br><br>

<!-- Help Begin: BankAccounts -->

<font size="+2"><b>Bank Accounts</b></font>
<br><br>
Certain general ledger accounts can be defined as bank accounts - as many bank accounts as needed can be defined. General ledger accounts defined as bank accounts can be reconciled to bank statements using the matching facilities. Entries made to bank accounts using receipts or payments, also create a total receipt or payment, which is retained for the purposes of matching off the bank statements. Using the bank payments page, general ledger payments can be analysed to any number of other general ledger accounts, but only one entry to the bank account is made. This page also allows payments to supplier accounts to be created. Similarly, using the receipt entry page, a series of receipts from customers which may all have been banked together can be deposited as one amount to a bank account. There is only one amount appearing on the statement as the total of all these receipts, this bank account transaction is created and available for matching deposits off the bank statements.
<br><br>
Once all receipts and payments are matched to bank statements, the bank reconciliation statement can be printed which should show how the current general ledger balance reconciles to the bank statement for this account.
<br><br>
Bank accounts are defined from the setup tab from the link to Bank Accounts Maintenance. There is facility to enter the name of the account, the bank account number and the address of the bank if required, as well as selecting the general ledger account to which it refers. There are links to edit existing bank account records and to delete them. However, once defined as referring to a particular general ledger code it is not possible to change the general ledger code of the bank account. This is because there would be entries made to this account. Similarly, if bank transactions have been created using this bank account it is not possible to delete it. The bank account transactions must be purged first (but currently no facility exists to purge bank transactions).

<!-- Help End: BankAccounts -->

<br><br>

<!-- Help Begin: Payments -->

<font size="+1"><b>Bank Account Payments</b></font>
<br><br>
>From the general ledger tab, the first link under transactions is Bank Account Payments.
<br><br>
The following data is required:
<br><br>
<ul>
<li>The bank account from which the payment has been (or is to be) made. A select box allows this to be selected from the list of defined bank accounts.
<li>The date on which it was paid. This is important since the accounting period in which the payment is entered is determined from the date. The system will default to today's date - this must be changed where bank payments are being entered retrospectively.
<li>The currency which is being paid. The entries to all bank accounts are made in local currency, but payment to suppliers may be made in foreign currency being purchased in local currency at the exchange rate entered. All bank accounts are recorded in local currency (there is no facility for foreign currency bank accounts). By default the system will use the functional currency of the business as defined in the company preferences page.
<li>The exchange rate - if the functional currency of the business is being used this should be 1. If another currency is being purchased with the payment then the rate at which it is being purchased should be entered.
<li>Narrative - applicable to the whole payment. Narrative applicable to individual general ledger entries can be entered separately.
</ul>
Payments can take two forms - either it is a general ledger payment or it is a payment to a supplier. General ledger payments require an analysis of how the payment should be posted to the general ledger. General ledger accounts can be specified either as the account code directly (if the account code is known) or by selecting from the select box. Any narrative applicable to the general ledger amount can be entered too - and the amount to be posted to the selected/entered account. The total payment is taken as being the sum of all the entries made. If the total of all entries made is negative then this is entered as a negative payment - these are accepted to allow for correction of data entry errors.

<!-- Help End: Payments -->

<br><br>
<font size="+2"><b>General Ledger Integration Setup</b></font>
<br><br>
There are two levels of general ledger integration. 
<br><br>
<ul>
<li>Sales journals that post a credit to a sales general ledger account, a debit to a discount account, a credit to a tax account, a credit to a freight recovery account and a debit to a debtor account. This level of integration also reverses the posting described here for sales credit notes. This level also triggers the general ledger journals for banking of cash against debtor accounts. Debiting a bank account and crediting the debtors account.
<li>Stock journals that post a debit to a cost of sales account and a credit to a stock account - and the reverse entries for sales credit notes.
</ul>
The level of general ledger integration is determined by reference to the flags in the company preferences page.
<br><br>

<!-- Help Begin: SalesGLPostings -->

<font size="+1"><b>Sales Journals</b></font>
<br><br>
The general ledger accounts that are used in this level of integration are determined from several inputs. 
<br><br>
<ul>
<li>Sales Area of the customer being invoiced/credited
<li>Sales Type (or price list) of the customer being invoiced/credited.
<li>Stock Category of the item being invoiced/credited.
</ul>
A table of sales general ledger accounts is maintained and can be modified from the setup tab. When an invoice is created from the ConfirmDispatch_Invoice.php script the system uses a function defined in GetSalesTransGLCode.inc to look up the general ledger codes that are appropriate. By default this function uses the following logic:
<br><br>
<ul>
<li>If there is a record in the SalesGLPostings table that has a matching Area, SalesType and Stock Category then the function returns the sales account and the discount account applicable.
<li>If there is a match for the Area and SalesType using the default Stock Category (ANY) then the codes applicable to this record are returned.
<li>Then if there is a matching Sales type, stock category with default (AN) area this is used.
<li>Then if there is a matching stock category record using the default area (AN) and the default salestype (AN) this is used - finally
<li>If there is no record is found after trying the above combinations then the GL Code for the default area, sales type and default stock category is used - this is GL code 1. If GL Code 1 is not defined, then it will be created.
</ul>
Since the logic of how the general ledger account is determined is defined in this function it is relatively simple to change this to what is most appropriate for the business.
<br><br>
The freight recovery and the debtors control account used are those defined in the company preferences page.
<br><br>
The tax account used is the account defined in the tax authorities definition used for the customer being invoiced.

<!-- Help End: SalesGLPostings -->

<br><br>

<!-- Help Begin: COGSGLPostings -->

<font size="+1"><b>Stock Journals</b></font>
<br><br>
The general ledger accounts that are used for posting sales transactions are determined using the sales area, the sales type of the customer being invoiced/credited and the stock category of the item being invoiced/credited. A table of general ledger accounts is maintained and can be modified from the set up tab from the link "COGS GL Interface Postings". The same logic as above is applied and the function is defined in the same GetSalesTransGLCode.inc script to look up the appropriate GL codes. Again, since the logic of how the general ledger account is determined is defined in the function GetCOGSGLAccount, it is relatively simple to change this to suit the business.
<br><br>
The account to credit stock with for the cost of goods sold is determined by reference to the stock item being sold. The stock category of the item is retrieved and the general ledger codes applicable to the stock category are used.
<br><br>
The profit and loss accounts used for stock adjustments are also determined by reference to the stock category record.
<br><br>
The profit and loss account used for posting the variance between standard cost of a purchased item and its actual cost as invoiced is also determined from the stock category record.

<!-- Help End: COGSGLPostings -->

<br><br>
<font size="+2"><b>EDI</b></font>
<br><br>
EDI stands for electronic data interchange - the electronic transmission of transaction information between trading partners. There are numerous standards for the encoding of such transactions the most widely used being UN/EDIFACT  and its derivative EANCOM implementation. In fact many industry groups use the standard formats in slightly different ways and some businesses within the industry use the industry standard slightly differently again. So ultimately, the standards are really only a framework for what the actual messages look like. In implementing EDI in webERP, some flexibility in the format of messages to be sent and received is available. EDI messages are created in flat files in the directory specified in config.php for EDI outgoing messages and a log of the EDI messages sent is retained also. The messages can be sent either as an email attachment to the customer supplied email address or via ftp to a customer supplied ftp server address - using the ftp username and password provided by the customer.
<br><br>

<!-- Help Begin: CustEDISetup -->

<font size="+1"><b>EDI Setup</b></font>
<br><br>
To enable EDI transactions for a customer, first select the customer from the Select Customer link on any page, then click the link - Customer EDI Configuration. This page allows selection of the type of transactions that are to transmitted electronically currently only invoices/credit notes and orders are available. Each must be specifically enabled to activate them. Each customer must have their:
<br><br>
<ul>
<li>EDI reference that they are identified by
<li>Transport mechanism and address to which the invoice/credit note messages are to be sent - either email as a file attachment or via ftp (file transfer protocol)
</ul>
If the transport mechanism is to be ftp - this must be compiled into PHP with the flag -enable-ftp, most windows PHP installtions have this by default now. Additional fields for the ftp server username and password will also be required.
<br><br>
To activate EDI polling for invoices to send the script EDISendInvoices.php must be run as a scheduled job - using cron or some other scheduling system -see automating sales reports. It can also be run from the utilites menu Z_index.php with debugging output.
<br><br>
To activate EDI polling for orders to be entered as received the script ???? must be run as a scheduled job using cron or some other scheduling system.
<br><br>
<font size="+1"><b>Sending EDI Invoices</b></font>
<br><br>
EDI messages are made up of segments which must appear in a certain order. Since customers will require EDI invoices in slightly different formats, the exact format can be defined in the table EDIMessageFormat. This table has a record for each customer invoice line and the sequence when it must appear in the message. The field line text in this table can include any of the predefined EDI invoice variables surrounded by "[" and "]" to denote them as a variable to be replaced with the appropriate value as follows:
<br><br>
<table>
<th colspan="2">EDI Invoice Detail Section</th>
<tr>
<td>
EDITransNo
</td>
<td>
The unique EDI transaction number
</td>
</tr>
<tr>
<td>
InvOrCrd
</td>
<td>
Whether the transaction is an invoice or a credit - the value of this variable is an EANCOM defined number, 388 for a tax invoice and 381 for a credit note
</td>
</tr>
<tr>
<td>
TransNo
</td>
<td>
The transaction number of invoice or credit 
</td>
</tr>
<tr>
<td>
OrigOrDup
</td>
<td>
Whether the transaction is a duplicate or original sending the value of this variable is an EANCOM defined number 7 for a duplicate and 9 for an original
</td>
</tr>
<tr>
<td>
TranDate
</td>
<td>
The transaction date in the format CCYYMMDD
</td>
</tr>
<tr>
<td>
OrderNo
</td>
<td>
The original order number - only for invoices
</td>
</tr>
<tr>
<td>
CustBranchCode
</td>
<td>
The customer's internal code for the branch
</td>
</tr>
<tr>
<td>
CompanyEDIReference
</td>
<td>
The customer's EDI reference code
</td>
</tr>
<tr>
<td>
BranchName
</td>
<td>
The branch name
</td>
</tr>
<tr>
<td>
BranchStreet
</td>
<td>
&nbsp;
</td>
</tr>
<tr>
<td>
BranchCity
</td>
<td>
&nbsp;
</td>
</tr>
<tr>
<td>
BranchState
</td>
<td>
&nbsp;
</td>
</tr>
<tr>
<td>
TaxAuthorityRef
</td>
<td>
The businesses Tax Authority reference number
</td>
</tr>
<tr>
<td>
DatePaymentDue
</td>
<td>
The due date for this transaction
</td>
</tr>
<tr>
<td>
TaxTotal
</td>
<td>
The total amount of tax on the transaction
</td>
</tr>
</table>
<table>
<th>EDI Invoice Detail Section - for the lines on the transaction</th>
<tr>
<td>
LineNumber
</td>
<td>
&nbsp;
</td>
</tr>
<tr>
<td>
StockID
</td>
<td>
The webERP item code 
</td>
</tr>
<tr>
<td>
CustStockID
</td>
<td>
The customer's internal code for the item
</td>
</tr>
<tr>
<td>
ItemDescription
</td>
<td>
&nbsp;
</td>
</tr>
<tr>
<td>
QtyInvoiced
</td>
<td>
Quantity invoiced or credited
</td>
</tr>
<tr>
<td>
LineTotalExclTax
</td>
<td>
The total for the line excluding tax
</td>
</tr>
<tr>
<td>
UnitPrice
</td>
<td>
Unit price for the item
</td>
</tr>
<tr>
<td>
LineTaxAmount
</td>
<td>
The tax applicable to the line
</td>
</tr>
</table>
<table>
<th>EDI Invoice Summary Section</th>
<tr>
<td>
NoLines
</td>
<td>
The total number of lines on the invoice/credit
</td>
</tr>
<tr>
<td>
TotalAmountExclTax
</td>
<td>
Total amount of the transaction excluding tax
</td>
</tr>
<tr>
<td>
TotalAmountInclTax
</td>
<td>
Total amount of the transaction including tax
</td>
</tr>
<tr>
<td>
NoSegments
</td>
<td>
The total number of segments in the transaction this is required as a control check in the summary
</td>
</tr>
</table>
There is therefore great flexibility in how the messages are defined. The variables for the summary and heading sections can be used in any section. The detail section variables can only be used in the detail section.
<br><br>
Most customers will require that the branch to which the invoiced goods are delivered to, be identified using the customer's coding system. It is therefore important to ensure that the customer's branch code is actually entered against the webERP branch record. The variable CustBranchCode is retrieved from the branch record and if it is not entered then the EDI transaction will fail.
<br><br>
Some customers may also require the item code to be their item code, not the webERP item code. The variable CustStockID is derived from the cross reference table EDIItemMapping which would need to contain a cross reference record for each item that they may buy.
<br><br>
The script that creates the EDI invoices (EDISendInvoices.php) should be run automatically in the background as a scheduled task. It first gets a list of all customers who should receive EDI invoices (or credit notes) - as determined in the settings of their DebtorsMaster record. Then the script goes through each customer returned in turn to get any invoices or credits that have not already been sent. A flat file is created for all the customers invoices and credits and sent to the customer using the transport, address and other parameters defined in the customer edi setup page - recorded against their DebtorsMaster record. There is a link to enable the script to be run manually - the browser will also show the output of the EDI message.

<!-- Help End: CustEDISetup -->

<br><br>
<font size="+3"><b><A NAME=Utilities>Special Utilities</A></b></font>
<br><br>
Any of these programs should only be run by the individual in the business who is allocated the task of administering the system, who has a thorough understanding of the system. If in doubt seek advice. Many of these utilities perform major changes to the database and it is always advisable to have a backup before attempting to run one. All these utilities have a page security setting of 15 by default (see security schema).
<br><br>
There are no links to the Utility menu so casual browsers cannot stumble upon this page even if they had the security privileges. The URL must be entered manually to Z_index.php. All utlity pages are prefixed with a Z_.
<br><br>
<font size="+2"><b>Re-Apply Standard Costs to Sales Analysis</b></font>
<br><br>
This utility allows a period to be selected for which the current standard cost is applied to the quantities recorded in the sales analysis as sold to re-calculate the cost of goods sold.
<br><br>
It is important to realise that this will destroy the integrity of the matching general ledger journals created at the time of invoicing and that the GL cost of sales will no longer match with the sales analysis cost of sales.
<br><br>
However, occasionally incorrect cost data that has made a monkey of the sales analysis and general ledger can only be rectified by running this utility.
<br><br>
<font size="+2"><b>Change A Customer Code</b></font>
<br><br>
This page requires the entry of an existing customer code and the new customer code. The system checks to see the new code entered doesn't already exist and that the code entered for the existing customer does exist. If all is well then the customer code data is changed in all tables through-out the system that refer to the customer code. Due to the extensive changes taking place throughout the database this utility should not be run during normal operating hours.
<br><br>
<font size="+2"><b>Change An Inventory Code</b></font>
<br><br>
This page requires the entry of an existing stock code and the new stock code. The system checks to see the new code entered doesn't already exist and that the code entered for the existing item does exist. If all is well then the stock code data is changed in all tables through-out the system. Sales analysis, stock movements, stock locations, Bills of Material, parent and component items, sales order details and purchase order details as well as the Stock Master, pricing and shipment charges. Due to the extensive changes taking place throughout the database this utility should not be run during normal operating hours.
<br><br>
<font size="+2"><b>Make Stock Locations</b></font>
<br><br>
If the inventory database is imported from some other system, the stock location records can be created for all locations currently defined by running the script Z_MakeStockLocns.php. 
<br><br>
<font size="+2"><b>Repost General Ledger from Period</b></font>
<br><br>
This script Z_RePostGLFromPeriod.php clears the actual data in the table ChartDetails - that contains the movements in each GL account, the movements are then re-calculated by setting all GLTrans to unposted and re-running the posting of all these transactions. This is a desperate measure that should only be undertaken in an extreme situation. Maybe a corrupt database or system crash etc that caused an out of balance trial balance.
<br><br>
<font size="+3"><b><A NAME=NewScripts>Developing New Scripts</A></b></font>
<br><br>
<font size="+2"><b>Directory Structure</b></font>
<br><br>
The scripts that make up the system are seperated into just two directories. The main root directory contains all the scripts that are called directly from links in the system. Scripts or portions of scripts that are included in one or more of the main scripts are held in the includes/ sub-directory. The scripts to create the database are held under the sql directory - these are sql scripts created by mysqldump. Documentation is under the doc/ sub-directory where this manual and the FAQ are held. Font files required by pdf.php the R&OS class file for creating pdf reports are held in the fonts/ sub-directory. Formatting style sheets are held under the css - see the themes section under getting started above.
<br><br>
Construction of new scripts should make use of the following building blocks that are used throughout the system.
<br><br>
<font size="+1"><b>session.inc</b></font>
<br><br>
This page must be included after the page has set the variable $PageSecurity to an appropriate integer (see the security schema section), session.inc has the following functons:
<br><br>
<ul>
<li>Establishes a session if none already exists and checks that an authorised user is logged in - if so it checks that the user is authorised for the specific page being called, based on the value of $PageSecurity.
<li>It in turn includes the scripts:
<li>config.php - this script contains all the configuration settings for the system. Including session.inc in the script at the start ensures that all system variables defined in config.php are available to the script. 
<li>ConnectDB.inc - this script initiates a connection to the database and contains all the database abstraction functions. When interacting with the database, only functions defined in this script are used not the mysql specific functions, since a change in database would be otherwise be difficult to effect. By using this file, only the functions in this script need to be modified for any other database to be used.
</ul>
<font size="+1"><b>header.inc</b></font>
<br><br>
This file should be included after the variable $title has been set to the name of the page. This file relies on config.php being already loaded, so session.inc (which in turn includes config.php) must be included before header.inc. The code in this script has the following functions:
<br><br>
<ul>
<li>Sets up the normal system banner with the links to the menu, item selection, customer and supplier selection pages. 
<li>Sets the style sheet used throughout the system.
</ul>
<font size="+1"><b>footer.inc</b></font>
<br><br>
This file contains the small logo, company name and copyright notice with the closing </body></html> tags.
<br><br>
<font size="+1"><b>config.php</b></font>
<br><br>
The developer should familiarise themselves with the variables in config.php as these are available to all scripts that have included session.inc. Of particular use is $rootpath which is the directory where the web server holds the system files. Having started the page with session.inc and header.inc - and then finishing with footer.inc much of the work to ensure a consistent look and feel is already done. 
<br><br>
<font size="+1"><b>PDFStarter_ros.inc</b></font>
<br><br>
The only time when it is not appropriate to include session.inc or header.inc is when a pdf script is to be created. Here the file PDFStarter_ros.inc contains the initiation of the session and the check for proper user authentication and authorisation for the specific page using the $PageSecurity variable which must be defined before PDFStarter_ros.inc is included. Normally, config.php and ConnectDB.inc are included seperately (and before PDF_starter_ros.inc) in PDF scripts.
<br><br>
<font size="+1"><b>Database Abstraction - ConnectDB.inc</b></font>
<br><br>
Whilst the system has been developed using MySql it has always been envisaged that users should not be forced to use Mysql - in keeping with open source principles. For this reason all requests of the database are made via abstraction functions in ConnectDB.inc. This policy has been rigorously maintained and developing extensions to the system which do not conform to this scheme would destroy the portability currently available between databases. Care has been taken to ensure that standards compliant SQL is used throughout, to ensure any database conversion issues are minimal.
<br><br>
<font size="+1"><b>DateFunctions.inc</b></font>
<br><br>
This script holds a number of functions for manipulating dates used throughout the system - amongst the most useful:
<br><br>
<ul>
<li>DateDiff - calculates the difference between two dates has parameters for the number of days, weeks or months.
<li>FormatDateForSQL converts a date in the format specified by $DefaultDateFormat in config.php to the format required for SQL - yyyy-mm-dd.
<li>ConvertSQLDate - Converts a date in SQL format yyyy-mm-dd to the date defined in config.php $DefaultDateFormat
<li>GetPeriodNo - Gets the period number for a given date by looking up the date in the period table - it creates new periods as necessary to ensure a valid period is returned.
</ul>
<font size="+1"><b>SQL_CommonFuctions.inc</b></font>
<br><br>
This script has some common functions used throughout the system - in particular:
<br><br>
ReadInCompanyRecord - returns an array of all the company record information.
<br><br>
<font size="+3"><b><A NAME=Contributors>Contributors - Acknowledgements</A></b></font>
<br><br>
Sherif Omar - Kylitech Consulting - bug fixes, tidy of html, cascading style sheet mods.
<br><br>
Shane Barnaby - index.php, header.inc, footer.inc, GUI work, cascading style sheets, themes, logo - look and feel.
<br><br>
Danie Brink - order entry user manual - screen shots.
<br><br>
Dick Stins - suggestions and pointers. Use of CVS, revision numbers.
<br><br>
Jesse Peterson - File upload of Serialised items - help with specification and first cut of code for Serial Items.
<br><br>
Chris Bice - Inquiry for All Inventory Movements and Inventory Status By Location and Category. Bulk transfers.
<br><br>
Steve Kaill - Improved GUI/css, documentation conversion to html and help text, User Settings
<br><br>
Phil Daintree - other bits and pieces.
</td>
</tr>
</table>
</basefont>
</body>
</html>
